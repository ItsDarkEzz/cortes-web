import{r as a,j as e,m as _}from"./vendor-motion-D0gEqtNn.js";import{c,i as E,y as z,b as p}from"./index-aSmLva6P.js";import{D as T}from"./DashboardLayout-Bpew1iRb.js";import{I as D}from"./index-CpZSP-O-.js";import{S as g,a as j,b as v,c as y,d as t}from"./select-Bu0P6vpf.js";import{b as W,l as i}from"./use-owner-BYwwTJLW.js";import{A as B}from"./arrow-left-B8uwMu6i.js";import{A as V}from"./activity-BOauTYxt.js";import{S as $}from"./search-CpZB0F_7.js";import{L as G}from"./settings-BpBPvRo7.js";import{C as q}from"./circle-alert-CQSmKniJ.js";import{C as F}from"./circle-x-D9u53cuK.js";import{T as U}from"./triangle-alert-D6QxyLKE.js";import"./vendor-react-Bzgz95E1.js";import"./vendor-ui-Uwvs5CZw.js";import"./check-BSVgkHIg.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],H=c("bug",P);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],J=c("info",X);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Q=c("wifi-off",K);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Z=c("wifi",Y),b={DEBUG:{icon:H,color:"text-gray-400",bg:"bg-gray-500/10"},INFO:{icon:J,color:"text-blue-400",bg:"bg-blue-500/10"},WARNING:{icon:U,color:"text-yellow-400",bg:"bg-yellow-500/10"},ERROR:{icon:F,color:"text-red-400",bg:"bg-red-500/10"},CRITICAL:{icon:q,color:"text-red-500",bg:"bg-red-500/20"}},ee={bot:"ü§ñ Bot",observer:"üëÅ Observer",core:"üß† Core",api:"üåê API",scheduler:"‚è∞ Scheduler",moderation:"üõ° Moderation",memory:"üíæ Memory"};function je(){const[,k]=E(),[x,N]=a.useState(""),[n,w]=a.useState("all"),[d,M]=a.useState("all"),[C,S]=a.useState(!1),[u,I]=a.useState([]),[l,L]=a.useState(!0),h=a.useRef(null),{data:R,isLoading:A}=W({limit:100,level:n!=="all"?n:void 0,source:d!=="all"?d:void 0,search:x||void 0});a.useEffect(()=>{const s=z.getAccessToken();return s&&(i.setOnMessage(o=>{I(r=>[o,...r].slice(0,200))}),i.setOnStatusChange(S),i.connect(s)),()=>{i.disconnect()}},[]),a.useEffect(()=>{l&&h.current&&h.current.scrollIntoView({behavior:"smooth"})},[u,l]);const f=[...u,...R?.logs||[]].filter((s,o,r)=>o===r.findIndex(m=>m.id===s.id)),O=s=>new Date(s).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return e.jsx(T,{children:e.jsxs("div",{className:"flex flex-col h-full gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>k("/dashboard/owner"),children:e.jsx(B,{className:"w-5 h-5"})}),e.jsx(V,{className:"w-6 h-6 text-primary"}),e.jsx("h1",{className:"text-xl font-bold",children:"–õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"}),C?e.jsxs("span",{className:"flex items-center gap-1 text-sm text-green-400",children:[e.jsx(Z,{className:"w-4 h-4"}),"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ"]}):e.jsxs("span",{className:"flex items-center gap-1 text-sm text-red-400",children:[e.jsx(Q,{className:"w-4 h-4"}),"–û—Ç–∫–ª—é—á–µ–Ω–æ"]})]}),e.jsx(p,{variant:l?"default":"outline",size:"sm",onClick:()=>L(!l),children:l?"–ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤–∫–ª":"–ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤—ã–∫–ª"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(D,{placeholder:"–ü–æ–∏—Å–∫ –≤ –ª–æ–≥–∞—Ö...",value:x,onChange:s=>N(s.target.value),className:"pl-9 bg-white/5 border-white/10"})]}),e.jsxs(g,{value:n,onValueChange:w,children:[e.jsx(j,{className:"w-[140px] bg-white/5 border-white/10",children:e.jsx(v,{placeholder:"–£—Ä–æ–≤–µ–Ω—å"})}),e.jsxs(y,{children:[e.jsx(t,{value:"all",children:"–í—Å–µ —É—Ä–æ–≤–Ω–∏"}),e.jsx(t,{value:"DEBUG",children:"Debug"}),e.jsx(t,{value:"INFO",children:"Info"}),e.jsx(t,{value:"WARNING",children:"Warning"}),e.jsx(t,{value:"ERROR",children:"Error"}),e.jsx(t,{value:"CRITICAL",children:"Critical"})]})]}),e.jsxs(g,{value:d,onValueChange:M,children:[e.jsx(j,{className:"w-[160px] bg-white/5 border-white/10",children:e.jsx(v,{placeholder:"–ò—Å—Ç–æ—á–Ω–∏–∫"})}),e.jsxs(y,{children:[e.jsx(t,{value:"all",children:"–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏"}),e.jsx(t,{value:"bot",children:"Bot"}),e.jsx(t,{value:"observer",children:"Observer"}),e.jsx(t,{value:"core",children:"Core"}),e.jsx(t,{value:"api",children:"API"}),e.jsx(t,{value:"scheduler",children:"Scheduler"}),e.jsx(t,{value:"moderation",children:"Moderation"}),e.jsx(t,{value:"memory",children:"Memory"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto rounded-xl bg-black/20 border border-white/10 p-2 font-mono text-sm",children:A?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(G,{className:"w-6 h-6 animate-spin text-primary"})}):f.length>0?e.jsxs("div",{className:"space-y-1",children:[f.map((s,o)=>{const r=b[s.level]||b.INFO,m=r.icon;return e.jsxs(_.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:`flex items-start gap-2 p-2 rounded ${r.bg} hover:bg-white/5 transition-colors`,children:[e.jsx(m,{className:`w-4 h-4 mt-0.5 shrink-0 ${r.color}`}),e.jsx("span",{className:"text-muted-foreground shrink-0 w-20",children:O(s.timestamp)}),e.jsx("span",{className:"shrink-0 w-24 text-xs",children:ee[s.source]||s.source}),e.jsx("span",{className:"flex-1 break-all",children:s.message}),s.chat_id&&e.jsxs("span",{className:"text-xs text-muted-foreground shrink-0",children:["chat:",s.chat_id]}),s.user_id&&e.jsxs("span",{className:"text-xs text-muted-foreground shrink-0",children:["user:",s.user_id]})]},s.id||o)}),e.jsx("div",{ref:h})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"–ù–µ—Ç –ª–æ–≥–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è"})})]})})}export{je as default};
