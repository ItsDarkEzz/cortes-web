import{r as p,j as e}from"./vendor-motion-D0gEqtNn.js";import{b as o,X as N,C as b,U as f,a as w,s as y,u as C,L as j,S as k,B as S}from"./index-aSmLva6P.js";import{D as x}from"./DashboardLayout-Bpew1iRb.js";import{a as T,b as L}from"./use-chats-CbTquMWZ.js";import{S as h,a as u,A as z,F as B,H as A,T as $,s as E,B as _,M as P,b as D,c as U,L as F,d as I,P as M}from"./PlanTab-DCNZMobt.js";import{S as g,L as O}from"./settings-BpBPvRo7.js";import{C as H}from"./check-BSVgkHIg.js";import{P as q}from"./pen-Cm4_f3hT.js";import{B as v}from"./bot-BOnop5e1.js";import{C as R}from"./clock-Cswu4yIg.js";import{B as X}from"./book-open-ChzRnzJk.js";import{A as G}from"./arrow-left-B8uwMu6i.js";import{T as J}from"./trash-2-D92CDgzm.js";import{C as K}from"./credit-card-CzzVRL6p.js";import"./vendor-react-Bzgz95E1.js";import"./vendor-ui-Uwvs5CZw.js";import"./volume-2-DnC-75sh.js";import"./plus-BQA9EFu6.js";import"./ban-CilfwISn.js";import"./circle-alert-CQSmKniJ.js";import"./lock-DhyLY1AZ.js";import"./triangle-alert-D6QxyLKE.js";import"./globe-CEXIqFkv.js";import"./chevron-right-BmO0skts.js";import"./external-link-rPxT9hSa.js";function Q({chat:l,onUpdate:i}){const[r,c]=p.useState(!1),[n,t]=p.useState({name:l.name,description:l.description||"",rules:l.rules||""}),d=()=>{i(n),c(!1)},m=l.stats;return e.jsxs("div",{className:"grid lg:grid-cols-2 gap-5",children:[e.jsxs(h,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(u,{icon:g,title:"Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ‡Ð°Ñ‚Ðµ"}),r?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>c(!1),children:[e.jsx(N,{size:14,className:"mr-2"}),"ÐžÑ‚Ð¼ÐµÐ½Ð°"]}),e.jsxs(o,{size:"sm",onClick:d,className:"bg-green-500 hover:bg-green-600",children:[e.jsx(H,{size:14,className:"mr-2"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"]})]}):e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>c(!0),children:[e.jsx(q,{size:14,className:"mr-2"}),"Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-white/10 to-white/5 flex items-center justify-center overflow-hidden",children:[e.jsx("img",{src:`${z}/chats/${l.id}/avatar`,alt:l.name,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none";const s=a.currentTarget.parentElement?.querySelector(".fallback-emoji");s&&s.classList.remove("hidden")}}),e.jsx("span",{className:"fallback-emoji hidden text-2xl",children:"ðŸ’¬"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ‡Ð°Ñ‚Ð°"}),r?e.jsx("input",{value:n.name,onChange:a=>t(s=>({...s,name:a.target.value})),className:"w-full h-10 px-3 mt-1 rounded-xl bg-white/5 border border-white/10"}):e.jsx("p",{className:"font-medium mt-1",children:l.name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"}),r?e.jsx("textarea",{value:n.description,onChange:a=>t(s=>({...s,description:a.target.value})),rows:3,className:"w-full px-3 py-2 mt-2 rounded-xl bg-white/5 border border-white/10 resize-none",placeholder:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ‡Ð°Ñ‚Ð°..."}):e.jsx("p",{className:"text-muted-foreground mt-1",children:l.description||"ÐÐµÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ"})]})]})]}),e.jsxs(h,{children:[e.jsx(u,{icon:b,title:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°",color:"text-green-400"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{icon:f,label:"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²",value:l.members_count.toLocaleString(),color:"text-blue-400"},{icon:w,label:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹",value:m.messages_total.toLocaleString(),color:"text-green-400"},{icon:v,label:"ÐžÑ‚Ð²ÐµÑ‚Ð¾Ð² Ð±Ð¾Ñ‚Ð°",value:m.bot_responses_total.toLocaleString(),color:"text-primary"},{icon:R,label:"Ð”Ð½ÐµÐ¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸",value:m.days_active.toString(),color:"text-yellow-400"}].map((a,s)=>e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 text-center",children:[e.jsx(a.icon,{size:20,className:`mx-auto mb-2 ${a.color}`}),e.jsx("p",{className:"text-2xl font-bold",children:a.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.label})]},s))})]}),e.jsxs(h,{className:"lg:col-span-2",children:[e.jsx(u,{icon:X,title:"ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° Ñ‡Ð°Ñ‚Ð° (/rules)"}),e.jsx("textarea",{value:r?n.rules:l.rules||"",onChange:a=>t(s=>({...s,rules:a.target.value})),rows:4,className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 resize-none",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ñ‡Ð°Ñ‚Ð°...",disabled:!r})]})]})}const V="/v1";function we(){const i=y().id,{data:r,isLoading:c}=T(i),n=L(i||""),[t,d]=p.useState("overview");C({title:`${r?.name||"Ð§Ð°Ñ‚"} | Cortes AI`,description:`ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ‡Ð°Ñ‚Ð° ${r?.name||""}`,canonical:`/dashboard/chats/${i}`});const m=async s=>{await n.mutateAsync({name:s.name,description:s.description,rules:s.rules})};if(c)return e.jsx(x,{children:e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(O,{className:"w-8 h-8 animate-spin text-primary"})})});if(!r)return e.jsx(x,{children:e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Ð§Ð°Ñ‚ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"}),e.jsx(j,{href:"/dashboard/chats",children:e.jsx(o,{children:"Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ðº Ñ‡Ð°Ñ‚Ð°Ð¼"})})]})});const a=[{key:"overview",label:"ÐžÐ±Ð·Ð¾Ñ€",icon:b},{key:"bot",label:"Ð‘Ð¾Ñ‚",icon:v},{key:"moderation",label:"ÐœÐ¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ñ",icon:k},{key:"filters",label:"Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹",icon:B},{key:"members",label:"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸",icon:f},{key:"logs",label:"Ð–ÑƒÑ€Ð½Ð°Ð»",icon:A},{key:"brain",label:"ÐœÐ¾Ð·Ð³",icon:S},{key:"plan",label:"Ð¢Ð°Ñ€Ð¸Ñ„",icon:K}];return e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 shrink-0",children:[e.jsx(j,{href:"/dashboard/chats",children:e.jsx(o,{variant:"ghost",size:"icon",className:"h-10 w-10",children:e.jsx(G,{size:20})})}),e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-white/10 to-white/5 flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`${V}/chats/${r.id}/avatar`,alt:r.name,className:"w-full h-full object-cover",onError:s=>{s.currentTarget.style.display="none"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-display font-bold",children:r.name}),e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.members_count.toLocaleString()," ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",className:"border-white/10",children:[e.jsx(g,{size:16,className:"mr-2"}),"Telegram"]}),e.jsxs(o,{variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",children:[e.jsx(J,{size:16,className:"mr-2"}),"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð±Ð¾Ñ‚Ð°"]})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2 shrink-0",children:a.map(s=>e.jsx($,{active:t===s.key,onClick:()=>d(s.key),icon:s.icon,label:s.label},s.key))}),e.jsxs("div",{className:`flex-1 overflow-y-auto pr-2 ${E}`,children:[t==="overview"&&e.jsx(Q,{chat:r,onUpdate:m}),t==="bot"&&e.jsx(_,{chatId:i}),t==="moderation"&&e.jsx(P,{chatId:i}),t==="filters"&&e.jsx(D,{chatId:i}),t==="members"&&e.jsx(U,{chatId:i}),t==="logs"&&e.jsx(F,{chatId:i}),t==="brain"&&e.jsx(I,{chatId:i}),t==="plan"&&e.jsx(M,{})]})]})}export{we as default};
