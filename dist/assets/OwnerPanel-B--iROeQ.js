import{j as e,m as r}from"./vendor-motion-D0gEqtNn.js";import{S as h,L as n,U as p,a as f,n as u,Z as j}from"./index-aSmLva6P.js";import{D as o}from"./DashboardLayout-Bpew1iRb.js";import{u as g,a as b}from"./use-owner-BYwwTJLW.js";import{L as N}from"./settings-BpBPvRo7.js";import{A as v}from"./activity-BOauTYxt.js";import{B as d}from"./ban-CilfwISn.js";import{S as w}from"./server-CnjzAo2-.js";import{C as y}from"./credit-card-CzzVRL6p.js";import{S as _}from"./send-LUS9yrWD.js";import{B as L}from"./bot-BOnop5e1.js";import"./vendor-react-Bzgz95E1.js";import"./vendor-ui-Uwvs5CZw.js";function S(s){const i=Math.floor(s/86400),a=Math.floor(s%86400/3600),l=Math.floor(s%3600/60);return i>0?`${i}д ${a}ч`:a>0?`${a}ч ${l}м`:`${l}м`}function c(s){return`$${s.toFixed(4)}`}function H(){const{data:s,isLoading:i}=g(),{data:a,isLoading:l}=b("24h");if(i||l)return e.jsx(o,{children:e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(N,{className:"w-8 h-8 animate-spin text-primary"})})});const m=[{icon:v,label:"Логи",href:"/dashboard/owner/logs",color:"text-blue-400"},{icon:d,label:"Баны",href:"/dashboard/owner/bans",color:"text-red-400"},{icon:w,label:"Чаты",href:"/dashboard/owner/chats",color:"text-green-400"},{icon:y,label:"Подписки",href:"/dashboard/owner/subscriptions",color:"text-purple-400"},{icon:_,label:"Рассылка",href:"/dashboard/owner/broadcast",color:"text-orange-400"}];return e.jsx(o,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(h,{className:"w-6 h-6 text-primary"}),"Панель владельца"]}),e.jsx("p",{className:"text-muted-foreground",children:"Полный контроль над ботом"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),e.jsx("span",{className:"text-sm text-green-400",children:"Бот онлайн"}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["Uptime: ",S(s?.uptime_seconds||0)]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:m.map(t=>e.jsx(n,{href:t.href,children:e.jsxs(r.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition-colors cursor-pointer",children:[e.jsx(t.icon,{className:`w-6 h-6 ${t.color} mb-2`}),e.jsx("p",{className:"font-medium text-sm",children:t.label})]})},t.href))}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-5 rounded-2xl bg-gradient-to-br from-blue-500/10 to-transparent border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(p,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Пользователи"})]}),e.jsx("p",{className:"text-3xl font-bold",children:s?.total_users?.toLocaleString()||0}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[e.jsxs("span",{className:"text-green-400",children:["+",s?.active_users_24h||0," за 24ч"]}),e.jsxs("span",{className:"text-muted-foreground",children:[s?.active_users_7d||0," за 7д"]})]})]}),e.jsxs(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"p-5 rounded-2xl bg-gradient-to-br from-green-500/10 to-transparent border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(f,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Чаты"})]}),e.jsx("p",{className:"text-3xl font-bold",children:s?.total_chats||0}),e.jsx("div",{className:"flex items-center gap-4 mt-2 text-sm",children:e.jsxs("span",{className:"text-green-400",children:[s?.active_chats||0," активных"]})})]}),e.jsxs(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-5 rounded-2xl bg-gradient-to-br from-purple-500/10 to-transparent border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(u,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Сообщения"})]}),e.jsx("p",{className:"text-3xl font-bold",children:s?.total_messages_24h?.toLocaleString()||0}),e.jsx("div",{className:"flex items-center gap-4 mt-2 text-sm",children:e.jsx("span",{className:"text-muted-foreground",children:"за 24 часа"})})]}),e.jsxs(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"p-5 rounded-2xl bg-gradient-to-br from-red-500/10 to-transparent border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(d,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Глобальные баны"})]}),e.jsx("p",{className:"text-3xl font-bold",children:s?.global_bans_count||0}),e.jsx(n,{href:"/dashboard/owner/bans",children:e.jsx("span",{className:"text-sm text-primary hover:underline cursor-pointer",children:"Управление →"})})]})]}),e.jsxs(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-6 rounded-2xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-400"}),"Использование LLM (24ч)"]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s?.llm_calls_24h?.toLocaleString()||0," вызовов"]}),e.jsxs("span",{className:"text-muted-foreground",children:[s?.llm_tokens_24h?.toLocaleString()||0," токенов"]}),e.jsx("span",{className:"text-green-400 font-medium",children:c(s?.llm_cost_24h||0)})]})]}),a?.entries&&a.entries.length>0?e.jsx("div",{className:"space-y-2",children:a.entries.slice(0,5).map((t,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:t.model}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.provider})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("span",{children:[t.calls_count," вызовов"]}),e.jsxs("span",{className:"text-muted-foreground",children:[(t.tokens_input+t.tokens_output).toLocaleString()," токенов"]}),e.jsx("span",{className:"text-green-400",children:c(t.cost)}),e.jsxs("span",{className:"text-muted-foreground",children:[t.avg_latency_ms.toFixed(0),"ms"]})]})]},x))}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Нет данных об использовании LLM"})]})]})})}export{H as default};
