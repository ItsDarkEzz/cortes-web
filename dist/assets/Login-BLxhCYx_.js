import{r as n,j as e,m as t,A as k}from"./vendor-motion-D0gEqtNn.js";import{c as C,i as A,j as _,k as S,l as L,m as T,u as B,L as E,b as l,d as z,C as I,B as M,a as P}from"./index-aSmLva6P.js";import{A as $}from"./arrow-left-B8uwMu6i.js";import{S as H,L as h}from"./settings-BpBPvRo7.js";import{C as g}from"./circle-x-D9u53cuK.js";import{C as R}from"./circle-check-9RVHg3Us.js";import"./vendor-react-Bzgz95E1.js";import"./vendor-ui-Uwvs5CZw.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],p=C("refresh-cw",q);function f({className:i}){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:i,children:e.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})}const D=[{icon:H,title:"Настройки",description:"Персонализация поведения бота",color:"text-blue-400"},{icon:I,title:"Аналитика",description:"Статистика использования",color:"text-cyan-400"},{icon:M,title:"Мозг",description:"Инструкции и мнения",color:"text-green-400"},{icon:P,title:"Модерация",description:"Управление чатом",color:"text-purple-400"}];function V(){const[,i]=A(),{isAuthenticated:j}=_(),[y,c]=n.useState(null),[o,r]=n.useState("idle"),[N,d]=n.useState(null),m=S(),b=L(),{data:s}=T(y,{enabled:o==="waiting"});B({title:"Личный кабинет | Cortes AI",description:"Войдите в личный кабинет Cortes через Telegram для управления вашим AI-ботом",canonical:"/login"}),n.useEffect(()=>{j&&i("/dashboard")},[j,i]),n.useEffect(()=>{!s||o==="confirmed"||(s.status==="success"||s.status==="confirmed"?(c(null),r("confirmed"),s.access_token&&s.refresh_token?b.mutate({access_token:s.access_token,refresh_token:s.refresh_token},{onSuccess:()=>{setTimeout(()=>i("/dashboard"),1e3)},onError:()=>{d("Не удалось завершить авторизацию"),r("error")}}):setTimeout(()=>i("/dashboard"),1500)):s.status==="expired"&&(r("expired"),c(null)))},[s,b,i,o]);const u=n.useCallback(async()=>{d(null),r("idle");try{const a=await m.mutateAsync();c(a.auth_token),r("waiting");const x=`https://t.me/CortesAiBot?start=auth_${a.auth_token}`;window.open(x,"_blank")}catch{d("Не удалось начать авторизацию. Попробуйте позже."),r("error")}},[m]),w=()=>{c(null),r("idle"),d(null)},v=()=>{switch(o){case"waiting":return e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsx(f,{className:"w-8 h-8 text-primary"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-yellow-500 flex items-center justify-center",children:e.jsx(h,{className:"w-4 h-4 animate-spin text-black"})})]})}),e.jsx("h3",{className:"text-xl font-semibold text-center mb-2",children:"Ожидание подтверждения"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:'Откройте Telegram и нажмите "Start" в боте @TheCortesBot'}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[e.jsx(h,{className:"w-3 h-3 animate-spin"}),e.jsx("span",{children:"Проверяем статус..."})]})]}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsxs(l,{variant:"outline",onClick:()=>window.open(`https://t.me/CortesAiBot?start=auth_${y}`,"_blank"),className:"border-white/10",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Открыть бота"]}),e.jsxs(l,{variant:"ghost",onClick:w,className:"text-muted-foreground",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Отмена"]})]})]});case"confirmed":return e.jsx(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:e.jsxs("div",{className:"p-6 rounded-2xl bg-green-500/10 border border-green-500/20 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(R,{className:"w-8 h-8 text-green-400"})})}),e.jsx("h3",{className:"text-xl font-semibold text-center mb-2 text-green-400",children:"Авторизация успешна!"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Перенаправляем в личный кабинет..."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-green-400",children:[e.jsx(h,{className:"w-3 h-3 animate-spin"}),e.jsx("span",{children:"Загрузка..."})]})]})});case"expired":return e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-yellow-500/10 border border-yellow-500/20 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500/20 flex items-center justify-center",children:e.jsx(p,{className:"w-8 h-8 text-yellow-400"})})}),e.jsx("h3",{className:"text-xl font-semibold text-center mb-2 text-yellow-400",children:"Сессия истекла"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Время ожидания истекло. Попробуйте снова."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(l,{onClick:u,className:"bg-primary hover:bg-primary/90",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Попробовать снова"]})})]});case"error":return e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-red-500/10 border border-red-500/20 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center",children:e.jsx(g,{className:"w-8 h-8 text-red-400"})})}),e.jsx("h3",{className:"text-xl font-semibold text-center mb-2 text-red-400",children:"Ошибка"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:N||"Произошла ошибка при авторизации"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(l,{onClick:u,className:"bg-primary hover:bg-primary/90",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Попробовать снова"]})})]});default:return e.jsxs(e.Fragment,{children:[e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4",children:D.map((a,x)=>e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5+x*.1},whileHover:{y:-4},className:"p-4 rounded-2xl bg-gradient-to-br from-white/10 to-white/5 border border-white/10 hover:border-white/20 transition-colors duration-300 group",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center mb-3 ${a.color} group-hover:scale-110 transition-transform mx-auto`,children:e.jsx(a.icon,{size:20})}),e.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.description})]},x))}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"pt-8",children:e.jsxs(l,{onClick:u,disabled:m.isPending,size:"lg",className:`h-14 px-8 rounded-full bg-[#0088cc] hover:bg-[#0077b5] text-white
                  font-medium text-lg shadow-[0_0_20px_rgba(0,136,204,0.4)]
                  transition-all hover:scale-105 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed`,children:[m.isPending?e.jsx(h,{className:"w-5 h-5 mr-3 animate-spin"}):e.jsx(f,{className:"w-5 h-5 mr-3"}),"Войти через Telegram"]})}),e.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.8},className:"text-sm text-muted-foreground/70",children:"Безопасная авторизация через @TheCortesBot"})]})}};return e.jsxs("section",{className:"relative min-h-screen flex flex-col items-center justify-center overflow-hidden px-4 py-12",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-primary/20 rounded-full blur-[120px] opacity-40 pointer-events-none"}),e.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto space-y-8",children:[e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:e.jsx(E,{href:"/",children:e.jsxs(l,{variant:"ghost",className:"text-muted-foreground hover:text-white",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"На главную"]})})}),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm",children:[e.jsx(z,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-white/80 tracking-wide",children:"ЛИЧНЫЙ КАБИНЕТ"})]}),e.jsxs(t.h1,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.1},className:"text-5xl md:text-7xl font-bold tracking-tighter leading-[0.9]",children:[e.jsx("span",{className:"block text-gradient",children:"ПАНЕЛЬ"}),e.jsx("span",{className:"block text-3xl md:text-5xl mt-2 font-bold font-sans bg-gradient-to-r from-primary via-purple-400 to-secondary bg-clip-text text-transparent",children:"Управления Cortes"})]}),e.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.3},className:"text-xl text-muted-foreground max-w-xl mx-auto leading-relaxed font-light",children:"Настраивайте бота, отслеживайте статистику и управляйте вашими чатами"}),e.jsx(k,{mode:"wait",children:v()})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-background to-transparent z-20"})]})}export{V as default};
