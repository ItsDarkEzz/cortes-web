import{r as j,j as e}from"./vendor-motion-D0gEqtNn.js";import{c as D,D as f,E as B,i as U,z as O,U as w,b as N,C as _,S as z,B as E,a as q}from"./index-aSmLva6P.js";import{D as v}from"./DashboardLayout-Bpew1iRb.js";import{D as H,b as W,c as G,d as J,e as K,f as P}from"./dialog-CzbwG9R-.js";import{A as Q,a as V,b as X,U as Y}from"./avatar-DNWj6Ucy.js";import{h as Z,g as ee,o as se}from"./use-owner-BYwwTJLW.js";import{F as ae,H as re,T as le,s as te,B as ie,M as ce,b as de,c as ne,L as oe,d as xe,P as me,E as he}from"./PlanTab-DCNZMobt.js";import{L as k,S as M}from"./settings-BpBPvRo7.js";import{A as C}from"./arrow-left-B8uwMu6i.js";import{U as je}from"./user-CNcL3bhD.js";import{B as pe}from"./bot-BOnop5e1.js";import{C as ge}from"./credit-card-CzzVRL6p.js";import{D as Ne}from"./dollar-sign-D7naHw4N.js";import{A as fe}from"./activity-BOauTYxt.js";import{C as ue}from"./use-chats-CbTquMWZ.js";import{C as be}from"./calendar-r31YOpGh.js";import"./vendor-react-Bzgz95E1.js";import"./vendor-ui-Uwvs5CZw.js";import"./volume-2-DnC-75sh.js";import"./clock-Cswu4yIg.js";import"./plus-BQA9EFu6.js";import"./check-BSVgkHIg.js";import"./ban-CilfwISn.js";import"./circle-alert-CQSmKniJ.js";import"./lock-DhyLY1AZ.js";import"./triangle-alert-D6QxyLKE.js";import"./globe-CEXIqFkv.js";import"./pen-Cm4_f3hT.js";import"./trash-2-D92CDgzm.js";import"./chevron-right-BmO0skts.js";import"./external-link-rPxT9hSa.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],we=D("cpu",ve);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_e=D("power-off",ye),t=j.forwardRef(({className:r,...s},a)=>e.jsx("div",{ref:a,className:f("rounded-xl border bg-card text-card-foreground shadow",r),...s}));t.displayName="Card";const i=j.forwardRef(({className:r,...s},a)=>e.jsx("div",{ref:a,className:f("flex flex-col space-y-1.5 p-6",r),...s}));i.displayName="CardHeader";const u=j.forwardRef(({className:r,...s},a)=>e.jsx("div",{ref:a,className:f("font-semibold leading-none tracking-tight",r),...s}));u.displayName="CardTitle";const h=j.forwardRef(({className:r,...s},a)=>e.jsx("div",{ref:a,className:f("text-sm text-muted-foreground",r),...s}));h.displayName="CardDescription";const c=j.forwardRef(({className:r,...s},a)=>e.jsx("div",{ref:a,className:f("p-6 pt-0",r),...s}));c.displayName="CardContent";const ke=j.forwardRef(({className:r,...s},a)=>e.jsx("div",{ref:a,className:f("flex items-center p-6 pt-0",r),...s}));ke.displayName="CardFooter";function ls(){const[,r]=B("/dashboard/owner/chats/:chatId"),[,s]=U(),{toast:a}=O(),l=r?.chatId||"",{data:g,isLoading:d}=Z(Number(l)),n=ee(),[L,b]=j.useState(!1),[x,T]=j.useState("overview");if(d)return e.jsx(v,{children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(k,{className:"w-8 h-8 animate-spin text-primary"})})});if(!g)return e.jsx(v,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[e.jsx(w,{className:"w-16 h-16 text-muted-foreground opacity-20"}),e.jsx("p",{className:"text-muted-foreground",children:"–ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"}),e.jsxs(N,{onClick:()=>s("/dashboard/owner/chats"),children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É"]})]})});const{chat:o,stats:I,settings:y,subscription:A}=g,S=async()=>{try{await n.mutateAsync({chatId:Number(l),notify:!0}),a({title:"–£—Å–ø–µ—à–Ω–æ",description:"–ë–æ—Ç –ø–æ–∫–∏–Ω—É–ª —á–∞—Ç"}),s("/dashboard/owner/chats")}catch{a({title:"–û—à–∏–±–∫–∞",description:"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç",variant:"destructive"})}},F=m=>new Date(m).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=m=>m.toLocaleString("ru-RU"),p=o.chat_type==="private",$=p?[{key:"overview",label:"–û–±–∑–æ—Ä",icon:_}]:[{key:"overview",label:"–û–±–∑–æ—Ä",icon:_},{key:"bot",label:"–ë–æ—Ç",icon:pe},{key:"moderation",label:"–ú–æ–¥–µ—Ä–∞—Ü–∏—è",icon:z},{key:"filters",label:"–§–∏–ª—å—Ç—Ä—ã",icon:ae},{key:"members",label:"–£—á–∞—Å—Ç–Ω–∏–∫–∏",icon:w},{key:"logs",label:"–ñ—É—Ä–Ω–∞–ª",icon:re},{key:"brain",label:"–ú–æ–∑–≥",icon:E},{key:"plan",label:"–¢–∞—Ä–∏—Ñ",icon:ge}];return e.jsx(v,{children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 shrink-0",children:[e.jsx(N,{variant:"ghost",size:"icon",className:"h-10 w-10",onClick:()=>s("/dashboard/owner/chats"),children:e.jsx(C,{size:20})}),e.jsxs(Q,{className:"w-12 h-12",children:[e.jsx(V,{src:se.getChatAvatarUrl(Number(l))}),e.jsx(X,{className:o.chat_type==="private"?"bg-blue-500/20":"bg-green-500/20",children:o.chat_type==="private"?e.jsx(je,{className:"w-5 h-5"}):e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-display font-bold",children:o.title}),y.is_enabled?e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}):e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-red-500/20 text-red-400",children:"–û—Ç–∫–ª—é—á—ë–Ω"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.members_count.toLocaleString()," —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤",o.username&&` ‚Ä¢ @${o.username}`,` ‚Ä¢ ID: ${o.telegram_chat_id}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",className:"border-white/10",children:[e.jsx(M,{size:16,className:"mr-2"}),"Telegram"]}),e.jsxs(N,{variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",onClick:()=>b(!0),children:[e.jsx(_e,{size:16,className:"mr-2"}),"–ü–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç"]})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2 shrink-0",children:$.map(m=>e.jsx(le,{active:x===m.key,onClick:()=>T(m.key),icon:m.icon,label:m.label},m.key))}),e.jsxs("div",{className:`flex-1 overflow-y-auto pr-2 ${te}`,children:[x==="overview"&&e.jsx(Ce,{chat:o,stats:I,settings:y,subscription:A,formatDate:F,formatNumber:R,isPrivateChat:p}),x==="bot"&&!p&&e.jsx(ie,{chatId:l}),x==="moderation"&&!p&&e.jsx(ce,{chatId:l}),x==="filters"&&!p&&e.jsx(de,{chatId:l}),x==="members"&&!p&&e.jsx(ne,{chatId:l}),x==="logs"&&e.jsx(oe,{chatId:l}),x==="brain"&&e.jsx(xe,{chatId:l}),x==="plan"&&!p&&e.jsx(me,{})]}),e.jsx(H,{open:L,onOpenChange:b,children:e.jsxs(W,{children:[e.jsxs(G,{children:[e.jsx(J,{children:"–ü–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç"}),e.jsxs(K,{children:['–ë–æ—Ç –≤—ã–π–¥–µ—Ç –∏–∑ —á–∞—Ç–∞ "',o.title,'". –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.']})]}),e.jsxs(P,{children:[e.jsx(N,{variant:"outline",onClick:()=>b(!1),children:"–û—Ç–º–µ–Ω–∞"}),e.jsxs(N,{variant:"destructive",onClick:S,disabled:n.isPending,children:[n.isPending&&e.jsx(k,{className:"w-4 h-4 mr-2 animate-spin"}),"–ü–æ–∫–∏–Ω—É—Ç—å"]})]})]})})]})})}function Ce({chat:r,stats:s,settings:a,subscription:l,formatDate:g,formatNumber:d,isPrivateChat:n}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`grid gap-4 ${n?"grid-cols-2 md:grid-cols-2":"grid-cols-2 md:grid-cols-4"}`,children:[e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(s.messages_total)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",d(s.messages_24h)," –∑–∞ 24—á"]})]})]}),!n&&e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(r.members_count)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.unique_users_24h," –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ 24—á"]})]})]}),e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),"LLM –≤—ã–∑–æ–≤–æ–≤ (Core)"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(s.llm_calls_total)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",s.llm_calls_24h," –∑–∞ 24—á"]})]})]}),!n&&e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Observer –≤—ã–∑–æ–≤–æ–≤"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(s.observer_calls_total)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.observer_activations," –∞–∫—Ç–∏–≤–∞—Ü–∏–π"]})]})]})]}),e.jsxs("div",{className:`grid gap-4 ${n?"grid-cols-2 md:grid-cols-2":"grid-cols-2 md:grid-cols-4"}`,children:[e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsx(h,{children:"–¢–æ–∫–µ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(s.llm_tokens_total)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["~",s.avg_messages_per_day," —Å–æ–æ–±—â/–¥–µ–Ω—å"]})]})]}),e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),"–°—Ç–æ–∏–º–æ—Å—Ç—å LLM"]})}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",s.llm_cost_total?.toFixed(4)||"0.0000"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"–≤—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ"})]})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsx(h,{children:"–ö–æ–Ω–≤–µ—Ä—Å–∏—è Observer"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.observer_calls_total>0?`${(s.observer_activations/s.observer_calls_total*100).toFixed(1)}%`:"0%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"–∞–∫—Ç–∏–≤–∞—Ü–∏–π / –≤—ã–∑–æ–≤–æ–≤"})]})]}),e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsx(h,{children:"–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–∞ 7–¥"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(s.unique_users_7d)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{children:e.jsxs(u,{className:"text-base flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),"–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"]})}),e.jsxs(c,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"–ó–∞ 24 —á–∞—Å–∞"}),e.jsxs("span",{children:[d(s.messages_24h)," —Å–æ–æ–±—â–µ–Ω–∏–π"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"–ó–∞ 7 –¥–Ω–µ–π"}),e.jsxs("span",{children:[d(s.messages_7d)," —Å–æ–æ–±—â–µ–Ω–∏–π"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"–ó–∞ 30 –¥–Ω–µ–π"}),e.jsxs("span",{children:[d(s.messages_30d)," —Å–æ–æ–±—â–µ–Ω–∏–π"]})]}),!n&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–∞ 7–¥"}),e.jsxs("span",{children:[s.unique_users_7d," –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"]})]})]})]}),e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{children:e.jsxs(u,{className:"text-base flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"–ü–æ–¥–ø–∏—Å–∫–∞"]})}),e.jsx(c,{children:l?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"–ü–ª–∞–Ω"}),e.jsx("span",{className:"font-medium",children:l.plan_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"–°—Ç–∞—Ç—É—Å"}),e.jsx("span",{className:l.status==="active"?"text-green-400":"text-red-400",children:l.status==="active"?"–ê–∫—Ç–∏–≤–Ω–∞":"–ù–µ–∞–∫—Ç–∏–≤–Ω–∞"})]}),l.expires_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"–ò—Å—Ç–µ–∫–∞–µ—Ç"}),e.jsx("span",{children:g(l.expires_at)})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏"})})]})]}),e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{children:e.jsxs(u,{className:"text-base flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"]})}),e.jsxs(c,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"Telegram ID"}),e.jsx("p",{className:"font-mono",children:r.telegram_chat_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"–¢–∏–ø —á–∞—Ç–∞"}),e.jsx("p",{children:r.chat_type==="private"?"–õ–∏—á–Ω—ã–π":r.chat_type==="supergroup"?"–°—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞":"–ì—Ä—É–ø–ø–∞"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"–î–æ–±–∞–≤–ª–µ–Ω"}),e.jsx("p",{children:g(r.joined_at)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"}),e.jsx("p",{children:r.last_activity?g(r.last_activity):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"})]})]})]}),!n&&e.jsxs(t,{className:"bg-white/5 border-white/10",children:[e.jsx(i,{children:e.jsxs(u,{className:"text-base flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"]})}),e.jsxs(c,{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.is_enabled?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm",children:a.is_enabled?"–ë–æ—Ç –≤–∫–ª—é—á—ë–Ω":"–ë–æ—Ç –æ—Ç–∫–ª—é—á—ë–Ω"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"–†–µ–∂–∏–º:"}),e.jsx("span",{className:"text-sm",children:a.bot_mode==="passive"?"üò¥ –ü–∞—Å—Å–∏–≤–Ω—ã–π":a.bot_mode==="aggressive"?"üî• –ê–∫—Ç–∏–≤–Ω—ã–π":"üòä –ù–æ—Ä–º–∞–ª—å–Ω—ã–π"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"–Ø–∑—ã–∫:"}),e.jsx("span",{className:"text-sm",children:a.language==="ru"?"üá∑üá∫ –†—É—Å—Å–∫–∏–π":"üá∫üá∏ English"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.nsfw_filter?"bg-green-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm",children:"NSFW —Ñ–∏–ª—å—Ç—Ä"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.auto_moderation?"bg-green-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm",children:"–ê–≤—Ç–æ–º–æ–¥–µ—Ä–∞—Ü–∏—è"})]})]})]})]})}export{ls as default};
