import{j as e,r as t,m as R,A as Ve}from"./vendor-motion-D0gEqtNn.js";import{c as $,b as k,X as ve,M as Ae,U as Oe,B as Ye,Z as Qe}from"./index-aSmLva6P.js";import{c as ke,d as Ce,e as es,f as ss,g as ts,C as Ne,h as as,i as ns,j as rs,k as is,l as ls,m as os,n as cs,o as ds,p as xs}from"./use-chats-CbTquMWZ.js";import{L as T,S as ms}from"./settings-BpBPvRo7.js";import{B as us}from"./bot-BOnop5e1.js";import{V as hs,I as qe}from"./volume-2-DnC-75sh.js";import{C as gs}from"./clock-Cswu4yIg.js";import{P as ye}from"./plus-BQA9EFu6.js";import{C as ie}from"./check-BSVgkHIg.js";import{B as Pe}from"./ban-CilfwISn.js";import{C as Fe}from"./circle-alert-CQSmKniJ.js";import{L as ps}from"./lock-DhyLY1AZ.js";import{T as bs}from"./triangle-alert-D6QxyLKE.js";import{G as fs}from"./globe-CEXIqFkv.js";import{P as Se}from"./pen-Cm4_f3hT.js";import{T as we}from"./trash-2-D92CDgzm.js";import{C as Ze}from"./chevron-right-BmO0skts.js";import{E as js}from"./external-link-rPxT9hSa.js";import{C as ys}from"./credit-card-CzzVRL6p.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ns=$("bell",vs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],_s=$("chart-no-axes-column",ws);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cs=$("chevron-left",ks);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],De=$("eye-off",Ss);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ms=$("eye",zs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_e=$("file-text",$s);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Es=$("file",Ls);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],As=$("flag",Ts);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ge=$("funnel",qs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Fs=$("grip-vertical",Ps);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Bs=$("history",Ds);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Ws=$("languages",Os);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Rs=$("link-2",Us);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Hs=$("mic",Is);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ue=$("minus",Vs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Zs=$("music",Qs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Ks=$("reply",Gs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],Js=$("sticker",Xs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ee=$("type",Ys);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],st=$("user-check",et);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ke=$("user-minus",tt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Re=$("video",at);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Xe=$("volume-x",nt),Pt="scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent hover:scrollbar-thumb-white/20";function ee({enabled:n,onToggle:r}){return e.jsx("button",{onClick:r,className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${n?"bg-primary":"bg-white/20"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transition-transform ${n?"translate-x-5":"translate-x-0"}`})})}function O({icon:n,title:r,desc:m,enabled:u,onToggle:h,color:j="text-primary"}){return e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-white/[0.07] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center ${j}`,children:e.jsx(n,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m})]})]}),e.jsx(ee,{enabled:u,onToggle:h})]})}function Ft({active:n,onClick:r,icon:m,label:u}){return e.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap ${n?"bg-primary text-white":"text-muted-foreground hover:text-white hover:bg-white/5"}`,children:[e.jsx(m,{size:16}),u]})}function q({children:n,className:r=""}){return e.jsx("div",{className:`p-5 rounded-2xl bg-white/5 border border-white/10 ${r}`,children:n})}function W({icon:n,title:r,color:m="text-primary"}){return e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[e.jsx(n,{size:18,className:m}),r]})}function Be({icon:n,title:r,color:m="text-primary",enabled:u,onToggle:h,children:j,className:c=""}){return e.jsxs("div",{className:`rounded-2xl bg-white/5 border border-white/10 overflow-hidden ${c}`,children:[e.jsxs("div",{className:`flex items-center justify-between p-4 ${u&&j?"border-b border-white/5":""}`,children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(n,{size:18,className:m}),r]}),e.jsx(ee,{enabled:u,onToggle:h})]}),u&&j&&e.jsx("div",{className:"p-4 pt-3",children:j})]})}function H({icon:n,title:r,desc:m,enabled:u,onToggle:h,color:j,message:c,onMessageChange:b,vars:y}){const[N,x]=t.useState(!1);return e.jsxs(R.div,{layout:!0,className:"rounded-xl bg-white/5 border border-white/10 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-9 h-9 rounded-lg bg-white/5 flex items-center justify-center shrink-0 ${j}`,children:e.jsx(n,{size:16})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:m})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u&&c!==void 0&&e.jsx("button",{onClick:()=>x(!N),className:"p-1.5 rounded-lg hover:bg-white/10 text-muted-foreground hover:text-white",children:e.jsx(Se,{size:14})}),e.jsx(ee,{enabled:u,onToggle:h})]})]}),u&&N&&c!==void 0&&b&&e.jsxs(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-3 pb-3 border-t border-white/5",children:[e.jsx("textarea",{value:c,onChange:g=>b(g.target.value),className:"w-full min-h-[50px] px-3 py-2 mt-3 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ..."}),y&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:y})]})]})}const Ie={owner:"Ð’Ð»Ð°Ð´ÐµÐ»ÐµÑ†",admin:"ÐÐ´Ð¼Ð¸Ð½",moderator:"ÐœÐ¾Ð´ÐµÑ€Ð°Ñ‚Ð¾Ñ€",member:"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸Ðº"},rt={owner:"text-yellow-400 bg-yellow-400/10",admin:"text-red-400 bg-red-400/10",moderator:"text-blue-400 bg-blue-400/10",member:"text-muted-foreground bg-white/5"},je={current:"pro",name:"Pro",expiresAt:"15 ÑÐ½Ð²Ð°Ñ€Ñ 2025",daysLeft:28},it=[{id:"free",name:"Free",price:"0",period:"",features:["100 ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹/Ð´ÐµÐ½ÑŒ","Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ñ","ÐŸÐ°Ð¼ÑÑ‚ÑŒ Ð±Ð¾Ñ‚Ð°"],color:"text-muted-foreground",popular:!1},{id:"pro",name:"Pro",price:"990",period:"/Ð¼ÐµÑ",features:["Ð‘ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹","Ð’ÑÐµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ð¸","ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð½Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°","API Ð´Ð¾ÑÑ‚ÑƒÐ¿"],color:"text-primary",popular:!0},{id:"business",name:"Business",price:"2990",period:"/Ð¼ÐµÑ",features:["Ð’ÑÑ‘ Ð¸Ð· Pro","ÐÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°Ñ‚Ð¾Ð²","Ð’Ñ‹Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€","SLA 99.9%"],color:"text-yellow-400",popular:!1}],lt="/v1";function Dt({chatId:n}){const{data:r,isLoading:m}=ke(n),u=Ce(n),[h,j]=t.useState(""),[c,b]=t.useState("friendly"),[y,N]=t.useState(!0),[x,g]=t.useState(!1),[f,S]=t.useState(""),[w,C]=t.useState(!1),[z,M]=t.useState(24),[_,a]=t.useState([]),[d,s]=t.useState(!1),[p,P]=t.useState(!1);t.useEffect(()=>{r?.bot&&(j(r.bot.name||"Cortes"),b(r.bot.personality||"friendly"),N(r.bot.auto_reply_enabled??!0),g(r.bot.welcome_enabled??!1),S(r.bot.welcome_message||"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² {chat_name}, {user}!"),C(r.bot.inactivity_enabled??!1),M(r.bot.inactivity_hours||24),a(r.bot.inactivity_messages||[]),s(!1))},[r]);const U=async()=>{P(!0);try{await u.mutateAsync({bot:{name:h,personality:c,auto_reply_enabled:y,welcome_enabled:x,welcome_message:f,inactivity_enabled:w,inactivity_hours:z,inactivity_messages:_}}),s(!1)}finally{P(!1)}},E=()=>s(!0);return m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-5",children:[e.jsxs(q,{children:[e.jsx(W,{icon:us,title:"ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð¾Ñ‚Ð°"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Ð˜Ð¼Ñ Ð±Ð¾Ñ‚Ð° Ð² Ñ‡Ð°Ñ‚Ðµ"}),e.jsx("input",{value:h,onChange:L=>{j(L.target.value),E()},className:"w-full h-10 px-3 mt-2 rounded-xl bg-white/5 border border-white/10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-3 block",children:"Ð¥Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€ Ð±Ð¾Ñ‚Ð°"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"friendly",label:"ðŸ˜Š Ð”Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ð¹"},{key:"business",label:"ðŸ’¼ Ð”ÐµÐ»Ð¾Ð²Ð¾Ð¹"},{key:"funny",label:"ðŸ˜„ Ð’ÐµÑÑ‘Ð»Ñ‹Ð¹"},{key:"strict",label:"ðŸ˜¤ Ð¡Ñ‚Ñ€Ð¾Ð³Ð¸Ð¹"}].map(L=>e.jsx("button",{className:`px-4 py-3 rounded-xl font-medium transition-colors ${c===L.key?"bg-primary text-white":"bg-white/5 text-muted-foreground hover:text-white hover:bg-white/10"}`,onClick:()=>{b(L.key),E()},children:L.label},L.key))})]})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-400/10 flex items-center justify-center text-blue-400",children:e.jsx(hs,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"ÐÐ²Ñ‚Ð¾-Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ð‘Ð¾Ñ‚ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾ Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ð² Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€"})]})]}),e.jsx(ee,{enabled:y,onToggle:()=>{N(!y),E()}})]})}),e.jsxs(q,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(W,{icon:Ns,title:"ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ",color:"text-green-400"}),e.jsx(ee,{enabled:x,onToggle:()=>{g(!x),E()}})]}),x&&e.jsx("textarea",{value:f,onChange:L=>{S(L.target.value),E()},rows:2,className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 resize-none",placeholder:"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² {chat_name}, {user}!"})]})]}),e.jsxs(q,{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(W,{icon:gs,title:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð½ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸",color:"text-yellow-400"}),e.jsx(ee,{enabled:w,onToggle:()=>{C(!w),E()}})]}),w&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ð§ÐµÑ€ÐµÐ·"}),e.jsx("input",{type:"number",value:z,onChange:L=>{M(parseInt(L.target.value)||24),E()},className:"w-20 h-10 px-3 rounded-xl bg-white/5 border border-white/10 text-center",min:1,max:168}),e.jsx("span",{className:"text-muted-foreground",children:"Ñ‡Ð°ÑÐ¾Ð² Ð±ÐµÐ· Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸"})]}),_.map((L,F)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:L,onChange:D=>{const B=[..._];B[F]=D.target.value,a(B),E()},className:"flex-1 h-10 px-4 rounded-xl bg-white/5 border border-white/10",placeholder:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð½ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸..."}),e.jsx(k,{variant:"ghost",size:"icon",className:"h-10 w-10 text-red-400 hover:text-red-300",onClick:()=>{a(_.filter((D,B)=>B!==F)),E()},children:e.jsx(ve,{size:18})})]},F)),e.jsxs(k,{variant:"outline",className:"w-full border-dashed border-white/20",onClick:()=>{a([..._,""]),E()},children:[e.jsx(ye,{size:16,className:"mr-2"}),"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ"]})]})]})]}),d&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-6 right-6 z-50",children:e.jsxs(k,{onClick:U,disabled:p,size:"lg",className:"bg-green-500 hover:bg-green-600 shadow-lg shadow-green-500/25",children:[p?e.jsx(T,{size:18,className:"mr-2 animate-spin"}):e.jsx(ie,{size:18,className:"mr-2"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ"]})})]})}function Bt({chatId:n}){const{data:r,isLoading:m}=ke(n),u=Ce(n),[h,j]=t.useState(!0),[c,b]=t.useState(""),[y,N]=t.useState(!0),[x,g]=t.useState(""),[f,S]=t.useState(!0),[w,C]=t.useState(""),[z,M]=t.useState(!0),[_,a]=t.useState(""),[d,s]=t.useState(3),[p,P]=t.useState(30),[U,E]=t.useState(14),[L,F]=t.useState(""),[D,B]=t.useState(!0),[A,G]=t.useState(""),[v,I]=t.useState(!0),[V,le]=t.useState(""),[se,oe]=t.useState(""),[Q,ce]=t.useState(!0),[te,de]=t.useState(""),[ae,xe]=t.useState(""),[ne,me]=t.useState(""),[re,ue]=t.useState(""),[K,he]=t.useState(""),[X,ge]=t.useState(""),[Z,pe]=t.useState(""),[ze,J]=t.useState(!1),[be,fe]=t.useState(!1);t.useEffect(()=>{if(r?.moderation){const i=r.moderation;j(i.ban_enabled??!0),b(i.ban_message||`ðŸš« ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ {user} Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½ Ð½Ð° {duration}.
ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: {reason}`),N(i.mute_enabled??!0),g(i.mute_message||`ðŸ”‡ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ {user} Ð·Ð°Ð³Ð»ÑƒÑˆÐµÐ½ Ð½Ð° {duration}.
ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: {reason}`),S(i.kick_enabled??!0),C(i.kick_message||`ðŸ‘¢ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ {user} ÑƒÐ´Ð°Ð»Ñ‘Ð½ Ð¸Ð· Ñ‡Ð°Ñ‚Ð°.
ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: {reason}`),M(i.warn_enabled??!0),a(i.warn_message||`âš ï¸ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ {user} Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð» Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ðµ ({warnings}/{max}).
ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: {reason}`),s(i.warnings_for_ban||3),P(i.ban_duration_days||30),E(i.warning_expire_days||14),F(i.auto_ban_message||`ðŸš« ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ {user} Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½ Ð½Ð° {days} Ð´Ð½ÐµÐ¹.
ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐµÐ½ Ð»Ð¸Ð¼Ð¸Ñ‚ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ð¹ ({warnings}/{max}).`),B(i.report_enabled??!0),G(i.report_message||`ðŸš¨ Ð–Ð°Ð»Ð¾Ð±Ð° Ð¾Ñ‚ {user} Ð½Ð° {target}.
Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ: {message}`),I(i.read_only_enabled??!0),le(i.read_only_message||"ðŸ”’ Ð§Ð°Ñ‚ Ð¿ÐµÑ€ÐµÐ²ÐµÐ´Ñ‘Ð½ Ð² Ñ€ÐµÐ¶Ð¸Ð¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ."),oe(i.read_only_off_message||"ðŸ”“ Ð¢Ð¸Ñ…Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼ Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½. Ð’ÑÐµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ."),ce(i.show_disabled_message??!0),de(i.disabled_command_message||"âŒ Ð­Ñ‚Ð° ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð° Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ñ… Ñ‡Ð°Ñ‚Ð°."),xe(i.no_permission_message||"âŒ Ð£ Ð²Ð°Ñ Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¿Ñ€Ð°Ð² Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÑÑ‚Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹."),me(i.ban_usage_message||"âŒ Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: /ban @username [Ð²Ñ€ÐµÐ¼Ñ] [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"),ue(i.mute_usage_message||"âŒ Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: /mute @username [Ð²Ñ€ÐµÐ¼Ñ] [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"),he(i.kick_usage_message||"âŒ Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: /kick @username [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"),ge(i.warn_usage_message||"âŒ Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: /warn @username [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"),pe(i.report_usage_message||"âŒ ÐžÑ‚Ð²ÐµÑ‚ÑŒÑ‚Ðµ Ð½Ð° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð½Ð°Ñ€ÑƒÑˆÐ¸Ñ‚ÐµÐ»Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹ /report [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"),J(!1)}},[r]);const Me=async()=>{fe(!0);try{await u.mutateAsync({moderation:{ban_enabled:h,ban_message:c,mute_enabled:y,mute_message:x,kick_enabled:f,kick_message:w,warn_enabled:z,warn_message:_,warnings_for_ban:d,ban_duration_days:p,warning_expire_days:U,auto_ban_message:L,report_enabled:D,report_message:A,read_only_enabled:v,read_only_message:V,read_only_off_message:se,show_disabled_message:Q,disabled_command_message:te,no_permission_message:ae,ban_usage_message:ne,mute_usage_message:re,kick_usage_message:K,warn_usage_message:X,report_usage_message:Z}}),J(!1)}finally{fe(!1)}},o=()=>J(!0);return m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-5",children:[e.jsxs(q,{children:[e.jsx(W,{icon:Pe,title:"ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ð¸",color:"text-red-400"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{icon:Pe,title:"/ban, /unban",desc:"Ð‘Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹",enabled:h,onToggle:()=>{j(!h),o()},color:"text-red-400",message:c,onMessageChange:i=>{b(i),o()},vars:"{user}, {duration}, {reason}"}),e.jsx(H,{icon:Xe,title:"/mute, /unmute",desc:"Ð—Ð°Ð³Ð»ÑƒÑˆÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹",enabled:y,onToggle:()=>{N(!y),o()},color:"text-orange-400",message:x,onMessageChange:i=>{g(i),o()},vars:"{user}, {duration}, {reason}"}),e.jsx(H,{icon:Ke,title:"/kick",desc:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð· Ñ‡Ð°Ñ‚Ð°",enabled:f,onToggle:()=>{S(!f),o()},color:"text-purple-400",message:w,onMessageChange:i=>{C(i),o()},vars:"{user}, {reason}"}),e.jsx(H,{icon:Fe,title:"/warn, /unwarn",desc:"Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ð¹",enabled:z,onToggle:()=>{M(!z),o()},color:"text-yellow-400",message:_,onMessageChange:i=>{a(i),o()},vars:"{user}, {warnings}, {max}, {reason}"}),e.jsx(H,{icon:As,title:"/report",desc:"Ð–Ð°Ð»Ð¾Ð±Ñ‹ Ð½Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹",enabled:D,onToggle:()=>{B(!D),o()},color:"text-blue-400",message:A,onMessageChange:i=>{G(i),o()},vars:"{user}, {target}, {message}"})]}),e.jsxs("div",{className:"mt-4 p-4 rounded-xl bg-cyan-500/10 border border-cyan-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ps,{className:"w-5 h-5 text-cyan-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Ð¢Ð¸Ñ…Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð°Ð´Ð¼Ð¸Ð½Ñ‹ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ"})]})]}),e.jsx("button",{onClick:()=>{I(!v),o()},className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${v?"bg-cyan-500":"bg-white/20"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transition-transform ${v?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸"}),e.jsx("textarea",{value:V,onChange:i=>{le(i.target.value),o()},className:"w-full min-h-[40px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"ðŸ”’ Ð§Ð°Ñ‚ Ð¿ÐµÑ€ÐµÐ²ÐµÐ´Ñ‘Ð½ Ð² Ñ€ÐµÐ¶Ð¸Ð¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸"}),e.jsx("textarea",{value:se,onChange:i=>{oe(i.target.value),o()},className:"w-full min-h-[40px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"ðŸ”“ Ð¢Ð¸Ñ…Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼ Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½. Ð’ÑÐµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ."})]})]})]})]}),e.jsxs(q,{children:[e.jsx(W,{icon:bs,title:"Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ð¹",color:"text-yellow-400"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"ÐŸÑ€ÐµÐ´Ð¾Ð² Ð´Ð»Ñ Ð±Ð°Ð½Ð°"}),e.jsx("input",{type:"number",value:d,onChange:i=>{const $e=Math.min(10,Math.max(1,parseInt(i.target.value)||3));s($e),o()},className:"w-full h-10 px-3 rounded-xl bg-white/5 border border-white/10 text-center",min:1,max:10})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Ð”Ð½ÐµÐ¹ Ð±Ð°Ð½Ð°"}),e.jsx("input",{type:"number",value:p,onChange:i=>{P(parseInt(i.target.value)||30),o()},className:"w-full h-10 px-3 rounded-xl bg-white/5 border border-white/10 text-center",min:1,max:365})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Ð¡Ð³Ð¾Ñ€Ð°Ð½Ð¸Ðµ Ð¿Ñ€ÐµÐ´Ð¾Ð²"}),e.jsx("input",{type:"number",value:U,onChange:i=>{E(parseInt(i.target.value)||14),o()},className:"w-full h-10 px-3 rounded-xl bg-white/5 border border-white/10 text-center",min:1,max:365})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð°Ð²Ñ‚Ð¾-Ð±Ð°Ð½Ð°"}),e.jsx("textarea",{value:L,onChange:i=>{F(i.target.value),o()},className:"w-full min-h-[60px] px-3 py-2 rounded-xl bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"ðŸš« ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ {user} Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½..."})]})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-5",children:[e.jsxs(q,{children:[e.jsx(W,{icon:Fe,title:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ…",color:"text-red-400"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm",children:"ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ñ‘Ð½Ð½Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ"}),e.jsx("button",{onClick:()=>{ce(!Q),o()},className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${Q?"bg-primary":"bg-white/20"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transition-transform ${Q?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð°"}),e.jsx("textarea",{value:te,onChange:i=>{de(i.target.value),o()},className:"w-full min-h-[40px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"âŒ Ð­Ñ‚Ð° ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð° Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ñ… Ñ‡Ð°Ñ‚Ð°."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¿Ñ€Ð°Ð²"}),e.jsx("textarea",{value:ae,onChange:i=>{xe(i.target.value),o()},className:"w-full min-h-[40px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"âŒ Ð£ Ð²Ð°Ñ Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¿Ñ€Ð°Ð² Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÑÑ‚Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹."})]})]})]}),e.jsxs(q,{children:[e.jsx(W,{icon:Ae,title:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´",color:"text-green-400"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð» Ñ†ÐµÐ»ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"/ban, /unban"}),e.jsx("textarea",{value:ne,onChange:i=>{me(i.target.value),o()},className:"w-full min-h-[36px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"âŒ Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: /ban @username [Ð²Ñ€ÐµÐ¼Ñ] [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"/mute, /unmute"}),e.jsx("textarea",{value:re,onChange:i=>{ue(i.target.value),o()},className:"w-full min-h-[36px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"âŒ Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: /mute @username [Ð²Ñ€ÐµÐ¼Ñ] [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"/kick"}),e.jsx("textarea",{value:K,onChange:i=>{he(i.target.value),o()},className:"w-full min-h-[36px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"âŒ Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: /kick @username [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"/warn, /unwarn"}),e.jsx("textarea",{value:X,onChange:i=>{ge(i.target.value),o()},className:"w-full min-h-[36px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"âŒ Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: /warn @username [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"/report"}),e.jsx("textarea",{value:Z,onChange:i=>{pe(i.target.value),o()},className:"w-full min-h-[36px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y font-mono text-xs",placeholder:"âŒ ÐžÑ‚Ð²ÐµÑ‚ÑŒÑ‚Ðµ Ð½Ð° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð½Ð°Ñ€ÑƒÑˆÐ¸Ñ‚ÐµÐ»Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹ /report [Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°]"})]})]})]})]}),ze&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-6 right-6 z-50",children:e.jsxs(k,{onClick:Me,disabled:be,size:"lg",className:"bg-green-500 hover:bg-green-600 shadow-lg shadow-green-500/25",children:[be?e.jsx(T,{size:18,className:"mr-2 animate-spin"}):e.jsx(ie,{size:18,className:"mr-2"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ"]})})]})}function Ot({chatId:n}){const{data:r,isLoading:m}=ke(n),u=Ce(n),[h,j]=t.useState(!1),[c,b]=t.useState([]),[y,N]=t.useState(""),[x,g]=t.useState(!1),[f,S]=t.useState([]),[w,C]=t.useState(""),[z,M]=t.useState(!1),[_,a]=t.useState(""),[d,s]=t.useState(!1),[p,P]=t.useState(""),[U,E]=t.useState(!1),[L,F]=t.useState(""),[D,B]=t.useState(!1),[A,G]=t.useState(""),[v,I]=t.useState(!0),[V,le]=t.useState(!0),[se,oe]=t.useState(!0),[Q,ce]=t.useState(!0),[te,de]=t.useState(!0),[ae,xe]=t.useState(!0),[ne,me]=t.useState(!0),[re,ue]=t.useState(!0),[K,he]=t.useState(!0),[X,ge]=t.useState(""),[Z,pe]=t.useState(""),[ze,J]=t.useState(!1),[be,fe]=t.useState(!1);t.useEffect(()=>{if(r?.filters){const l=r.filters;j(l.stop_words_enabled??!1),b(l.stop_words||[]),N(l.stop_word_message||"âš ï¸ Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾. ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: Ð·Ð°Ð¿Ñ€ÐµÑ‰Ñ‘Ð½Ð½Ð¾Ðµ ÑÐ»Ð¾Ð²Ð¾."),g(l.block_channel_posts??!1),S(l.blocked_channels||[]),C(l.channel_block_message||"âš ï¸ Ð ÐµÐ¿Ð¾ÑÑ‚ Ð¸Ð· ÑÑ‚Ð¾Ð³Ð¾ ÐºÐ°Ð½Ð°Ð»Ð° Ð·Ð°Ð¿Ñ€ÐµÑ‰Ñ‘Ð½."),M(l.filter_arabic??!1),a(l.arabic_message||"âš ï¸ {user}, Ð°Ñ€Ð°Ð±ÑÐºÐ¸Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð·Ð°Ð¿Ñ€ÐµÑ‰ÐµÐ½Ñ‹."),s(l.filter_chinese??!1),P(l.chinese_message||"âš ï¸ {user}, ÐºÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¸Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð·Ð°Ð¿Ñ€ÐµÑ‰ÐµÐ½Ñ‹."),E(l.filter_zalgo??!1),F(l.zalgo_message||"âš ï¸ {user}, zalgo-Ñ‚ÐµÐºÑÑ‚ Ð·Ð°Ð¿Ñ€ÐµÑ‰Ñ‘Ð½."),B(l.nsfw_filter_enabled??!1),G(l.nsfw_message||"ðŸ”ž {user}, NSFW ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð·Ð°Ð¿Ñ€ÐµÑ‰Ñ‘Ð½.")}if(r?.media_permissions){const l=r.media_permissions;I(l.can_send_photos??!0),le(l.can_send_videos??!0),oe(l.can_send_video_notes??!0),ce(l.can_send_voice_notes??!0),de(l.can_send_documents??!0),xe(l.can_send_audios??!0),me(l.can_send_stickers??!0),ue(l.can_send_polls??!0),he(l.can_send_links??!0)}J(!1)},[r]);const Me=async()=>{fe(!0);try{await u.mutateAsync({filters:{stop_words_enabled:h,stop_words:c,stop_word_message:y,block_channel_posts:x,blocked_channels:f,channel_block_message:w,filter_arabic:z,arabic_message:_,filter_chinese:d,chinese_message:p,filter_zalgo:U,zalgo_message:L,block_links:!K,nsfw_filter_enabled:D,nsfw_message:A},media_permissions:{can_send_photos:v,can_send_videos:V,can_send_video_notes:se,can_send_voice_notes:Q,can_send_documents:te,can_send_audios:ae,can_send_stickers:ne,can_send_polls:re,can_send_links:K}}),J(!1)}finally{fe(!1)}},o=()=>J(!0),i=()=>{X&&!c.includes(X.toLowerCase())&&(b([...c,X.toLowerCase()]),ge(""),o())},$e=l=>{b(c.filter((Y,Le)=>Le!==l)),o()},We=()=>{const l=Z.startsWith("@")?Z:`@${Z}`;Z&&!f.includes(l)&&(S([...f,l]),pe(""),o())},Je=l=>{S(f.filter((Y,Le)=>Le!==l)),o()};return m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsxs(Be,{icon:Ge,title:"Ð¡Ñ‚Ð¾Ð¿-ÑÐ»Ð¾Ð²Ð°",color:"text-red-400",enabled:h,onToggle:()=>{j(!h),o()},children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:c.map((l,Y)=>e.jsxs("span",{className:"px-2 py-1 rounded-lg bg-red-400/10 text-red-400 text-sm flex items-center gap-1.5",children:[l,e.jsx("button",{onClick:()=>$e(Y),className:"hover:text-red-300",children:e.jsx(ve,{size:12})})]},Y))}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{value:X,onChange:l=>ge(l.target.value),onKeyDown:l=>l.key==="Enter"&&i(),placeholder:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ»Ð¾Ð²Ð¾...",className:"flex-1 h-9 px-3 rounded-lg bg-white/5 border border-white/10 text-sm"}),e.jsx(k,{size:"sm",onClick:i,children:e.jsx(ye,{size:14})})]}),e.jsx("input",{value:y,onChange:l=>{N(l.target.value),o()},placeholder:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸",className:"w-full h-9 px-3 rounded-lg bg-white/5 border border-white/10 text-sm"})]}),e.jsxs(Be,{icon:Rs,title:"Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ ÐºÐ°Ð½Ð°Ð»Ð¾Ð²",color:"text-orange-400",enabled:x,onToggle:()=>{g(!x),o()},children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:f.map((l,Y)=>e.jsxs("span",{className:"px-2 py-1 rounded-lg bg-orange-400/10 text-orange-400 text-sm flex items-center gap-1.5",children:[l,e.jsx("button",{onClick:()=>Je(Y),className:"hover:text-orange-300",children:e.jsx(ve,{size:12})})]},Y))}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{value:Z,onChange:l=>pe(l.target.value),onKeyDown:l=>l.key==="Enter"&&We(),placeholder:"@channel_name",className:"flex-1 h-9 px-3 rounded-lg bg-white/5 border border-white/10 text-sm"}),e.jsx(k,{size:"sm",onClick:We,children:e.jsx(ye,{size:14})})]}),e.jsx("input",{value:w,onChange:l=>{C(l.target.value),o()},placeholder:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐµ",className:"w-full h-9 px-3 rounded-lg bg-white/5 border border-white/10 text-sm"})]}),e.jsxs(q,{children:[e.jsx(W,{icon:Ws,title:"Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ñ‚ÐµÐºÑÑ‚Ð°",color:"text-cyan-400"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{icon:Ee,title:"ÐÑ€Ð°Ð±ÑÐºÐ¸Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹",desc:"Ð‘Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð°Ñ€Ð°Ð±ÑÐºÐ¸Ð¹ Ñ‚ÐµÐºÑÑ‚",enabled:z,onToggle:()=>{M(!z),o()},color:"text-cyan-400",message:_,onMessageChange:l=>{a(l),o()},vars:"{username}, {name}"}),e.jsx(H,{icon:Ee,title:"ÐšÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¸Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹",desc:"Ð‘Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¸Ð¹ Ñ‚ÐµÐºÑÑ‚",enabled:d,onToggle:()=>{s(!d),o()},color:"text-cyan-400",message:p,onMessageChange:l=>{P(l),o()},vars:"{username}, {name}"}),e.jsx(H,{icon:Ee,title:"Zalgo Ñ‚ÐµÐºÑÑ‚",desc:"Ð‘Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ÑÐºÐ°Ð¶Ñ‘Ð½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚",enabled:U,onToggle:()=>{E(!U),o()},color:"text-cyan-400",message:L,onMessageChange:l=>{F(l),o()},vars:"{username}, {name}"})]})]}),e.jsxs(q,{children:[e.jsx(W,{icon:De,title:"NSFW Ñ„Ð¸Ð»ÑŒÑ‚Ñ€",color:"text-pink-400"}),e.jsx("div",{className:"space-y-2",children:e.jsx(H,{icon:De,title:"NSFW ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚",desc:"Ð‘Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ñ‚ÐºÑ€Ð¾Ð²ÐµÐ½Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚",enabled:D,onToggle:()=>{B(!D),o()},color:"text-pink-400",message:A,onMessageChange:l=>{G(l),o()},vars:"{username}, {name}"})})]}),e.jsxs(q,{className:"lg:col-span-2",children:[e.jsx(W,{icon:qe,title:"Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð¼ÐµÐ´Ð¸Ð°",color:"text-blue-400"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ, ÐºÐ°ÐºÐ¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[e.jsx(O,{icon:qe,title:"Ð¤Ð¾Ñ‚Ð¾",desc:"Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ",enabled:v,onToggle:()=>{I(!v),o()},color:"text-green-400"}),e.jsx(O,{icon:Re,title:"Ð’Ð¸Ð´ÐµÐ¾",desc:"Ð’Ð¸Ð´ÐµÐ¾Ñ„Ð°Ð¹Ð»Ñ‹",enabled:V,onToggle:()=>{le(!V),o()},color:"text-blue-400"}),e.jsx(O,{icon:Re,title:"ÐšÑ€ÑƒÐ¶ÐºÐ¸",desc:"Ð’Ð¸Ð´ÐµÐ¾-ÐºÑ€ÑƒÐ¶ÐºÐ¸",enabled:se,onToggle:()=>{oe(!se),o()},color:"text-purple-400"}),e.jsx(O,{icon:Hs,title:"Ð“Ð¾Ð»Ð¾ÑÐ¾Ð²Ñ‹Ðµ",desc:"Ð“Ð¾Ð»Ð¾ÑÐ¾Ð²Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ",enabled:Q,onToggle:()=>{ce(!Q),o()},color:"text-orange-400"}),e.jsx(O,{icon:Es,title:"Ð¤Ð°Ð¹Ð»Ñ‹",desc:"Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹",enabled:te,onToggle:()=>{de(!te),o()},color:"text-yellow-400"}),e.jsx(O,{icon:Zs,title:"ÐœÑƒÐ·Ñ‹ÐºÐ°",desc:"ÐÑƒÐ´Ð¸Ð¾Ñ„Ð°Ð¹Ð»Ñ‹",enabled:ae,onToggle:()=>{xe(!ae),o()},color:"text-pink-400"}),e.jsx(O,{icon:Js,title:"Ð¡Ñ‚Ð¸ÐºÐµÑ€Ñ‹",desc:"Ð¡Ñ‚Ð¸ÐºÐµÑ€Ñ‹ Ð¸ GIF",enabled:ne,onToggle:()=>{me(!ne),o()},color:"text-cyan-400"}),e.jsx(O,{icon:_s,title:"ÐžÐ¿Ñ€Ð¾ÑÑ‹",desc:"Ð“Ð¾Ð»Ð¾ÑÐ¾Ð²Ð°Ð½Ð¸Ñ",enabled:re,onToggle:()=>{ue(!re),o()},color:"text-indigo-400"}),e.jsx(O,{icon:fs,title:"Ð¡ÑÑ‹Ð»ÐºÐ¸",desc:"ÐŸÑ€ÐµÐ²ÑŒÑŽ ÑÑÑ‹Ð»Ð¾Ðº",enabled:K,onToggle:()=>{he(!K),o()},color:"text-teal-400"})]})]}),e.jsx(ot,{chatId:n,onChangesMade:o})]}),ze&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-6 right-6 z-50",children:e.jsxs(k,{onClick:Me,disabled:be,size:"lg",className:"bg-green-500 hover:bg-green-600 shadow-lg shadow-green-500/25",children:[be?e.jsx(T,{size:18,className:"mr-2 animate-spin"}):e.jsx(ie,{size:18,className:"mr-2"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ"]})})]})}function ot({chatId:n,onChangesMade:r}){const{data:m}=ke(n),u=Ce(n),[h,j]=t.useState(!1),[c,b]=t.useState(!1),[y,N]=t.useState(!1),[x,g]=t.useState(2),[f,S]=t.useState(!1),[w,C]=t.useState(!1),[z,M]=t.useState(""),[_,a]=t.useState(""),[d,s]=t.useState([]),[p,P]=t.useState(""),[U,E]=t.useState(!1),[L,F]=t.useState(!1),[D,B]=t.useState(!1);t.useEffect(()=>{if(m?.face_control){const v=m.face_control;j(v.enabled??!1),b(v.require_avatar??!1),N(v.require_username??!1),g(v.min_name_length??2),S(v.nsfw_avatar_check??!1),C(v.questionnaire_enabled??!1),M(v.questionnaire_intro||"ÐžÑ‚Ð²ÐµÑ‚ÑŒÑ‚Ðµ Ð½Ð° Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð»Ñ Ð²ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ñ Ð² Ñ‡Ð°Ñ‚"),a(v.questionnaire_success||"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ!"),s(v.questionnaire_questions||[]),P(v.notify_chat_id?String(v.notify_chat_id):""),F(!1)}},[m]);const A=()=>{F(!0),r()},G=async()=>{B(!0);try{await u.mutateAsync({face_control:{enabled:h,require_avatar:c,require_username:y,min_name_length:x,nsfw_avatar_check:f,questionnaire_enabled:w,questionnaire_intro:z,questionnaire_success:_,questionnaire_questions:d,notify_chat_id:p?parseInt(p):null}}),F(!1)}finally{B(!1)}};return e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[L&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(k,{onClick:G,disabled:D,className:"bg-green-500 hover:bg-green-600",children:[D?e.jsx(T,{size:16,className:"mr-2 animate-spin"}):e.jsx(ie,{size:16,className:"mr-2"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Face Control"]})}),e.jsxs(Be,{icon:st,title:"Face-ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ",color:"text-green-400",enabled:h,onToggle:()=>{j(!h),A()},className:"lg:col-span-2",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-2 mb-4",children:[e.jsx(O,{icon:qe,title:"Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ñ‚ÑŒ Ð°Ð²Ð°Ñ‚Ð°Ñ€",desc:"ÐÐ²Ð°Ñ‚Ð°Ñ€ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½",enabled:c,onToggle:()=>{b(!c),A()},color:"text-green-400"}),e.jsx(O,{icon:De,title:"NSFW Ð°Ð²Ð°Ñ‚Ð°Ñ€",desc:"ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð°Ð²Ð°Ñ‚Ð°Ñ€Ð°",enabled:f,onToggle:()=>{S(!f),A()},color:"text-pink-400"}),e.jsx(O,{icon:Oe,title:"Username",desc:"@username Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½",enabled:y,onToggle:()=>{N(!y),A()},color:"text-green-400"}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-green-400",children:e.jsx(_e,{size:14})}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-sm",children:"ÐœÐ¸Ð½. Ð´Ð»Ð¸Ð½Ð° Ð¸Ð¼ÐµÐ½Ð¸"})})]}),e.jsx("input",{type:"number",value:x,onChange:v=>{g(parseInt(v.target.value)||2),A()},className:"w-14 h-8 px-2 rounded-lg bg-white/5 border border-white/10 text-center text-sm",min:1,max:64})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-400/10 flex items-center justify-center text-blue-400",children:e.jsx(_e,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"ÐÐ½ÐºÐµÑ‚Ð° Ð¿Ñ€Ð¸ Ð²ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ð¸"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.length," Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[w&&e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>E(!0),children:[e.jsx(Se,{size:14,className:"mr-2"}),"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ"]}),e.jsx(ee,{enabled:w,onToggle:()=>{C(!w),A()}})]})]}),w&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Ð’ÑÑ‚ÑƒÐ¿Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ"}),e.jsx("textarea",{value:z,onChange:v=>{M(v.target.value),A()},className:"w-full min-h-[60px] px-3 py-2 rounded-lg bg-white/5 border border-white/10 resize-y text-sm",placeholder:"ÐžÑ‚Ð²ÐµÑ‚ÑŒÑ‚Ðµ Ð½Ð° Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð»Ñ Ð²ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ñ Ð² Ñ‡Ð°Ñ‚"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¼ Ð¿Ñ€Ð¾Ñ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ð¸"}),e.jsx("input",{value:_,onChange:v=>{a(v.target.value),A()},className:"w-full h-9 px-3 rounded-lg bg-white/5 border border-white/10 text-sm",placeholder:"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"ID Ñ‡Ð°Ñ‚Ð°/Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð´Ð»Ñ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ Ð¾ Ð·Ð°ÑÐ²ÐºÐ°Ñ…"}),e.jsx("input",{value:p,onChange:v=>{P(v.target.value),A()},className:"w-full h-9 px-3 rounded-lg bg-white/5 border border-white/10 text-sm",placeholder:"-1001234567890 Ð¸Ð»Ð¸ 123456789"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ ID Ñ‡Ð°Ñ‚Ð° Ð¸Ð»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ, ÐºÑƒÐ´Ð° Ð±ÑƒÐ´ÑƒÑ‚ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð·Ð°ÑÐ²ÐºÐ¸ Ð½Ð° Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ð¸ÑŽ"})]})]})]}),e.jsx(ct,{isOpen:U,onClose:()=>E(!1),questions:d,intro:z,success:_,onSave:v=>{s(v.questions.map((I,V)=>({id:I.id,text:I.text,required:I.required,order:V}))),M(v.intro),a(v.success),A()}})]})]})}function ct({isOpen:n,onClose:r,questions:m,intro:u,success:h,onSave:j}){const[c,b]=t.useState(m),[y,N]=t.useState(u),[x,g]=t.useState(h),[f,S]=t.useState(null),[w,C]=t.useState(null);t.useEffect(()=>{b(m),N(u),g(h)},[m,u,h,n]);const z=a=>S(a),M=(a,d)=>{a.preventDefault(),C(d)},_=()=>{if(f!==null&&w!==null&&f!==w){const a=[...c],[d]=a.splice(f,1);a.splice(w,0,d),b(a)}S(null),C(null)};return n?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),e.jsxs(R.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative w-full max-w-4xl max-h-[90vh] bg-card border border-white/10 rounded-3xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(_e,{size:24,className:"text-blue-400"}),"ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€ Ð°Ð½ÐºÐµÑ‚Ñ‹"]}),e.jsx("button",{onClick:r,className:"p-2.5 rounded-xl hover:bg-white/10 text-muted-foreground hover:text-white",children:e.jsx(ve,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-base font-medium mb-3 block",children:"ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ"}),e.jsx("textarea",{value:y,onChange:a=>N(a.target.value),rows:3,className:"w-full px-5 py-4 rounded-2xl bg-white/5 border border-white/10 text-base resize-none",placeholder:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ´ Ð¿ÐµÑ€Ð²Ñ‹Ð¼ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð¼..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-base font-medium mb-3 block",children:"Ð’Ð¾Ð¿Ñ€Ð¾ÑÑ‹ (Ð¿ÐµÑ€ÐµÑ‚Ð°Ñ‰Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¿Ð¾Ñ€ÑÐ´ÐºÐ°)"}),e.jsxs("div",{className:"space-y-3",children:[c.map((a,d)=>e.jsxs("div",{draggable:!0,onDragStart:()=>z(d),onDragOver:s=>M(s,d),onDragEnd:_,className:`flex items-center gap-4 p-4 rounded-2xl border group transition-all cursor-move ${f===d?"opacity-50 bg-primary/10 border-primary/30":w===d?"bg-primary/5 border-primary/20":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[e.jsx(Fs,{size:22,className:"text-muted-foreground cursor-grab active:cursor-grabbing shrink-0"}),e.jsx("span",{className:"w-10 h-10 rounded-full bg-primary/20 text-primary text-base flex items-center justify-center font-bold shrink-0",children:d+1}),e.jsx("input",{value:a.text,onChange:s=>{const p=[...c];p[d]={...p[d],text:s.target.value},b(p)},onClick:s=>s.stopPropagation(),className:"flex-1 h-12 px-4 rounded-xl bg-white/5 border border-white/10 text-base focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Ð¢ÐµÐºÑÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°..."}),e.jsx("button",{onClick:s=>{s.stopPropagation();const p=[...c];p[d]={...p[d],required:!p[d].required},b(p)},className:`px-4 py-2.5 rounded-xl text-base font-medium transition-colors shrink-0 ${a.required?"bg-red-400/20 text-red-400":"bg-white/10 text-muted-foreground hover:text-white"}`,children:a.required?"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹":"ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹"}),e.jsx("button",{onClick:s=>{s.stopPropagation(),b(c.filter((p,P)=>P!==d))},className:"p-2.5 rounded-xl hover:bg-red-400/20 text-muted-foreground hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all shrink-0",children:e.jsx(we,{size:20})})]},a.id)),e.jsxs("button",{onClick:()=>b([...c,{id:Date.now(),text:"",required:!1}]),className:"w-full p-4 rounded-2xl border-2 border-dashed border-white/20 text-muted-foreground hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all flex items-center justify-center gap-2 text-base",children:[e.jsx(ye,{size:20}),"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾Ñ"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-base font-medium mb-3 block",children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ"}),e.jsx("textarea",{value:x,onChange:a=>g(a.target.value),rows:3,className:"w-full px-5 py-4 rounded-2xl bg-white/5 border border-white/10 text-base resize-none",placeholder:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð½Ð° Ð²ÑÐµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹..."})]}),e.jsxs("div",{className:"p-5 rounded-2xl bg-gradient-to-br from-blue-400/10 to-primary/10 border border-blue-400/20",children:[e.jsxs("p",{className:"text-base text-blue-400 mb-4 font-medium flex items-center gap-2",children:[e.jsx(Ms,{size:20}),"ÐŸÑ€ÐµÐ²ÑŒÑŽ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð°"]}),e.jsxs("div",{className:"space-y-4 text-base",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¤–"}),e.jsx("p",{className:"flex-1 p-3 rounded-xl bg-white/5",children:y||"ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ..."})]}),c.map((a,d)=>e.jsxs("div",{className:"space-y-3 pl-8 border-l-2 border-white/10",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¤–"}),e.jsxs("p",{className:"flex-1 p-3 rounded-xl bg-white/5",children:[a.text||`Ð’Ð¾Ð¿Ñ€Ð¾Ñ ${d+1}`," ",a.required&&e.jsx("span",{className:"text-red-400",children:"*"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ‘¤"}),e.jsx("p",{className:"flex-1 p-3 rounded-xl bg-primary/10 text-primary/70 italic",children:"ÐžÑ‚Ð²ÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ..."})]})]},a.id)),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¤–"}),e.jsx("p",{className:"flex-1 p-3 rounded-xl bg-white/5",children:x||"Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ..."})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 p-6 border-t border-white/10",children:[e.jsx(k,{variant:"outline",size:"lg",onClick:r,children:"ÐžÑ‚Ð¼ÐµÐ½Ð°"}),e.jsx(k,{size:"lg",onClick:()=>{j({questions:c,intro:y,success:x}),r()},children:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"})]})]})]}):null}function Wt({chatId:n}){const{data:r,isLoading:m,refetch:u}=es(n),h=ss(n),j=ts(n),[c,b]=t.useState(""),[y,N]=t.useState(null),[x,g]=t.useState(null),[f,S]=t.useState(null),w=r?.members||[],C=r?.warning_limit||3,z=c?w.filter(a=>a.name.toLowerCase().includes(c.toLowerCase())||a.username&&a.username.toLowerCase().includes(c.toLowerCase())):w,M=async(a,d)=>{g(a);try{await h.mutateAsync({userId:a,role:d}),u(),N(null)}catch(s){console.error("Failed to update role:",s)}finally{g(null)}},_=async a=>{S(a);try{await j.mutateAsync(a),u()}catch(d){console.error("Failed to remove warning:",d)}finally{S(null)}};return m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ð’ÑÐµÐ³Ð¾ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²: ",e.jsx("span",{className:"text-white font-medium",children:r?.total||0})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx("input",{value:c,onChange:a=>b(a.target.value),placeholder:"ÐŸÐ¾Ð¸ÑÐº ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²...",className:"w-full h-12 pl-12 pr-4 rounded-xl bg-white/5 border border-white/10"})]}),z.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:c?"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹":"ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾Ð± ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ°Ñ…"}):e.jsx("div",{className:"space-y-3",children:z.map(a=>e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-white/10 to-white/5 flex items-center justify-center text-xl overflow-hidden",children:[e.jsx("img",{src:`${lt}/users/${a.id}/avatar`,alt:a.name,className:"w-full h-full object-cover",onError:d=>{d.currentTarget.style.display="none";const s=d.currentTarget.nextElementSibling;s&&(s.style.display="flex")}}),e.jsx("span",{className:"hidden items-center justify-center w-full h-full text-xl",children:a.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium truncate",children:a.name}),e.jsx("span",{className:`px-2 py-0.5 rounded-lg text-xs font-medium ${rt[a.role]}`,children:Ie[a.role]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.username?`@${a.username}`:`ID: ${a.id}`})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold",children:a.messages_count||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("p",{className:`font-bold ${a.warnings>0?"text-red-400":"text-green-400"}`,children:[a.warnings,"/",C]}),a.warnings>0&&e.jsx("button",{onClick:()=>_(a.id),disabled:f===a.id,className:"p-1 rounded-lg hover:bg-red-400/20 text-red-400 transition-colors disabled:opacity-50",title:"Ð¡Ð½ÑÑ‚ÑŒ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ðµ",children:f===a.id?e.jsx(T,{size:12,className:"animate-spin"}):e.jsx(Ue,{size:12})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ÐŸÑ€ÐµÐ´Ñ‹"})]})]}),a.role!=="owner"&&e.jsxs(k,{variant:"outline",size:"sm",className:"border-white/10",onClick:()=>N(y===a.id?null:a.id),children:[e.jsx(Ne,{size:14,className:"mr-2"}),"Ð Ð¾Ð»ÑŒ",e.jsx(Ze,{size:14,className:`ml-1 transition-transform duration-200 ${y===a.id?"rotate-90":""}`})]})]}),e.jsxs("div",{className:"flex md:hidden items-center gap-4 mt-3 pt-3 border-t border-white/10",children:[e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("p",{className:"font-bold",children:a.messages_count||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹"})]}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsxs("p",{className:`font-bold ${a.warnings>0?"text-red-400":"text-green-400"}`,children:[a.warnings,"/",C]}),a.warnings>0&&e.jsx("button",{onClick:()=>_(a.id),disabled:f===a.id,className:"p-1 rounded-lg hover:bg-red-400/20 text-red-400 transition-colors disabled:opacity-50",title:"Ð¡Ð½ÑÑ‚ÑŒ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ðµ",children:f===a.id?e.jsx(T,{size:12,className:"animate-spin"}):e.jsx(Ue,{size:12})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ÐŸÑ€ÐµÐ´Ñ‹"})]})]}),e.jsx(Ve,{children:y===a.id&&e.jsx(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð»ÑŒ:"}),e.jsx("div",{className:"flex gap-2",children:["admin","moderator","member"].map(d=>e.jsx("button",{disabled:x===a.id,onClick:()=>a.role!==d&&M(a.id,d),className:`flex-1 px-4 py-2 rounded-xl font-medium transition-colors disabled:opacity-50 ${a.role===d?"bg-primary text-white":"bg-white/5 text-muted-foreground hover:text-white hover:bg-white/10"}`,children:x===a.id?e.jsx(T,{size:16,className:"mx-auto animate-spin"}):Ie[d]},d))})]})})})]},a.id))})]})}const dt={ban:"text-red-400 bg-red-400/10",mute:"text-orange-400 bg-orange-400/10",warn:"text-yellow-400 bg-yellow-400/10",kick:"text-purple-400 bg-purple-400/10",delete:"text-blue-400 bg-blue-400/10",role:"text-green-400 bg-green-400/10",filter:"text-pink-400 bg-pink-400/10"},xt={ban:"Ð‘Ð°Ð½",unban:"Ð Ð°Ð·Ð±Ð°Ð½",mute:"ÐœÑƒÑ‚",unmute:"Ð Ð°Ð·Ð¼ÑƒÑ‚",warn:"ÐŸÑ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ðµ",unwarn:"Ð¡Ð½ÑÑ‚Ð¸Ðµ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ",kick:"ÐšÐ¸Ðº",delete:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ",read_only_on:"Ð¢Ð¸Ñ…Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼ Ð²ÐºÐ»",read_only_off:"Ð¢Ð¸Ñ…Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼ Ð²Ñ‹ÐºÐ»",filter_trigger:"Ð¡Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð» Ñ„Ð¸Ð»ÑŒÑ‚Ñ€",role_change:"Ð¡Ð¼ÐµÐ½Ð° Ñ€Ð¾Ð»Ð¸"},mt={stop_word:"Ð¡Ñ‚Ð¾Ð¿-ÑÐ»Ð¾Ð²Ð¾",media:"ÐœÐµÐ´Ð¸Ð°",symbols:"Ð¡Ð¸Ð¼Ð²Ð¾Ð»Ñ‹",arabic:"ÐÑ€Ð°Ð±ÑÐºÐ¸Ðµ",chinese:"ÐšÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¸Ðµ",zalgo:"Zalgo",nsfw:"NSFW"},ut={bot:"Ð‘Ð¾Ñ‚",moderation:"ÐœÐ¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ñ",filters:"Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹",face_control:"Face-ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ",media_permissions:"ÐœÐµÐ´Ð¸Ð°"},He={text:"Ð¢ÐµÐºÑÑ‚",photo:"ðŸ“· Ð¤Ð¾Ñ‚Ð¾",video:"ðŸŽ¬ Ð’Ð¸Ð´ÐµÐ¾",video_note:"ðŸ”µ ÐšÑ€ÑƒÐ¶Ð¾Ðº",voice:"ðŸŽ¤ Ð“Ð¾Ð»Ð¾ÑÐ¾Ð²Ð¾Ðµ",audio:"ðŸŽµ ÐÑƒÐ´Ð¸Ð¾",document:"ðŸ“„ Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚",sticker:"ðŸŽ¨ Ð¡Ñ‚Ð¸ÐºÐµÑ€",animation:"ðŸŽž GIF",poll:"ðŸ“Š ÐžÐ¿Ñ€Ð¾Ñ"};function Te({pagination:n,page:r,setPage:m}){return!n||n.pages<=1?null:e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 pt-4 border-t border-white/10",children:[e.jsx(k,{variant:"outline",size:"sm",disabled:r<=1,onClick:()=>m(r-1),className:"border-white/10",children:e.jsx(Cs,{size:16})}),e.jsxs("span",{className:"text-sm text-muted-foreground px-3",children:[r," / ",n.pages]}),e.jsx(k,{variant:"outline",size:"sm",disabled:r>=n.pages,onClick:()=>m(r+1),className:"border-white/10",children:e.jsx(Ze,{size:16})})]})}function Ut({chatId:n}){const[r,m]=t.useState("actions"),[u,h]=t.useState(1),[j,c]=t.useState(1),[b,y]=t.useState(1),{data:N,isLoading:x}=as(n,{limit:20,page:u}),{data:g,isLoading:f}=ns(n,{limit:20,page:j}),{data:S,isLoading:w}=rs(n,{limit:20,page:b}),C=s=>new Date(s).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),z=s=>s?`https://t.me/c/${n.startsWith("-100")?n.slice(4):n.replace("-","")}/${s}`:null,M=N?.logs||[],_=g?.messages||[],a=S?.logs||[],d=s=>{const p=[];return s.filter_type&&p.push(mt[s.filter_type]||s.filter_type),s.matched_content&&s.filter_type!==s.matched_content&&p.push(`"${s.matched_content}"`),s.warning_count!==void 0&&s.warning_limit!==void 0&&p.push(`${s.warning_count}/${s.warning_limit}`),s.duration&&p.push(s.duration),s.old_role&&s.new_role&&p.push(`${s.old_role} â†’ ${s.new_role}`),s.message_id&&p.push(`#${s.message_id}`),p.length>0?p.join(" â€¢ "):null};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 p-1 rounded-xl bg-white/5",children:[e.jsx("button",{onClick:()=>m("actions"),className:`flex-1 py-2.5 rounded-lg font-medium transition-colors text-sm ${r==="actions"?"bg-primary text-white":"text-muted-foreground hover:text-white"}`,children:"ÐœÐ¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ñ"}),e.jsx("button",{onClick:()=>m("messages"),className:`flex-1 py-2.5 rounded-lg font-medium transition-colors text-sm ${r==="messages"?"bg-primary text-white":"text-muted-foreground hover:text-white"}`,children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ"}),e.jsx("button",{onClick:()=>m("settings"),className:`flex-1 py-2.5 rounded-lg font-medium transition-colors text-sm ${r==="settings"?"bg-primary text-white":"text-muted-foreground hover:text-white"}`,children:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"})]}),r==="actions"?x?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{className:"w-8 h-8 animate-spin text-primary"})}):M.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"ÐÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸ÑÑ… Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:M.map(s=>e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${dt[s.type]||"text-gray-400 bg-gray-400/10"}`,children:[s.type==="ban"&&e.jsx(Pe,{size:18}),s.type==="mute"&&e.jsx(Xe,{size:18}),s.type==="warn"&&e.jsx(Fe,{size:18}),s.type==="kick"&&e.jsx(Ke,{size:18}),s.type==="delete"&&e.jsx(we,{size:18}),s.type==="role"&&e.jsx(Ne,{size:18}),s.type==="filter"&&e.jsx(Ge,{size:18})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-medium",children:[xt[s.action]||s.action,s.target_name&&s.target_name!=="â€”"&&e.jsx("span",{className:"text-primary ml-1",children:s.target_name})]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[s.by_name,s.reason&&` â€¢ ${s.reason}`]})]}),e.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:C(s.created_at)})]}),d(s)&&e.jsx("div",{className:"mt-2 pt-2 border-t border-white/5 text-xs text-muted-foreground",children:d(s)})]},s.id))}),e.jsx(Te,{pagination:N?.pagination,page:u,setPage:h})]}):r==="messages"?f?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{className:"w-8 h-8 animate-spin text-primary"})}):_.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"ÐÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:_.map(s=>e.jsxs("div",{className:`p-4 rounded-xl ${s.deleted?"bg-red-500/5 border border-red-500/20":"bg-white/5 border border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-primary",children:s.user_name}),s.message_type&&s.message_type!=="text"&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-white/10 text-muted-foreground",children:He[s.message_type]||s.message_type})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:C(s.created_at)}),s.telegram_message_id&&e.jsx("a",{href:z(s.telegram_message_id)||"#",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",title:"ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð² Telegram",children:e.jsx(js,{size:14})})]})]}),s.reply_to_user_name&&e.jsxs("div",{className:"text-xs text-muted-foreground mb-2 flex items-center gap-1",children:[e.jsx(Ks,{size:12}),e.jsx("span",{children:"ÐžÑ‚Ð²ÐµÑ‚ Ð½Ð° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ"}),e.jsx("span",{className:"text-primary",children:s.reply_to_user_name})]}),e.jsx("p",{className:s.deleted?"text-red-400 italic":"",children:s.deleted?"[ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾]":s.text||`[${He[s.message_type]||s.message_type}]`}),s.deleted&&s.deleted_reason&&e.jsxs("p",{className:"text-sm text-red-400/70 mt-2 flex items-center gap-2",children:[e.jsx(we,{size:14}),s.deleted_reason]})]},s.id))}),e.jsx(Te,{pagination:g?.pagination,page:j,setPage:c})]}):w?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{className:"w-8 h-8 animate-spin text-primary"})}):a.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"ÐÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ Ð¾Ð± Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸ÑÑ… Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:a.map(s=>e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{size:14,className:"text-primary"}),e.jsx("span",{className:"font-medium",children:ut[s.section]||s.section}),e.jsx("span",{className:"text-muted-foreground",children:"â€¢"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.field_name})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:C(s.created_at)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-red-400 line-through",children:s.old_value||"â€”"}),e.jsx("span",{className:"text-muted-foreground",children:"â†’"}),e.jsx("span",{className:"text-green-400",children:s.new_value||"â€”"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Ð˜Ð·Ð¼ÐµÐ½Ð¸Ð»: ",s.user_name]})]},s.id))}),e.jsx(Te,{pagination:S?.pagination,page:b,setPage:y})]})]})}function Rt({chatId:n}){const{data:r,isLoading:m}=is(n),u=ls(n),[h,j]=t.useState(""),[c,b]=t.useState(!1),[y,N]=t.useState(!1);t.useEffect(()=>{r?.instructions!==void 0&&(j(r.instructions||""),N(!1))},[r?.instructions]);const x=async()=>{b(!0);try{await u.mutateAsync(h),N(!1)}catch(g){console.error("Failed to save instructions:",g)}finally{b(!1)}};return m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 p-4 rounded-2xl bg-gradient-to-r from-primary/10 via-purple-500/10 to-pink-500/10 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/20 flex items-center justify-center",children:e.jsx(Ye,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"ÐŸÐ°Ð¼ÑÑ‚ÑŒ"}),e.jsxs("p",{className:"font-semibold",children:[r?.memory_entries||0," Ð·Ð°Ð¿Ð¸ÑÐµÐ¹"]})]})]}),e.jsx("div",{className:"h-8 w-px bg-white/10"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹"}),e.jsx("p",{className:"font-semibold",children:r?.total_messages_processed?.toLocaleString()||"0"})]}),e.jsx("div",{className:"h-8 w-px bg-white/10"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ"}),e.jsx("p",{className:"font-semibold text-green-400",children:"â— ÐÐºÑ‚Ð¸Ð²ÐµÐ½"})]})]}),e.jsxs(q,{children:[e.jsx(W,{icon:Se,title:"Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸",color:"text-yellow-400"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"ÐšÐ°Ðº Cortes Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑÑ‚Ð¸ ÑÐµÐ±Ñ Ð² ÑÑ‚Ð¾Ð¼ Ñ‡Ð°Ñ‚Ðµ"}),e.jsx("textarea",{value:h,onChange:g=>{j(g.target.value),N(!0)},placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð‘ÑƒÐ´ÑŒ Ð±Ð¾Ð»ÐµÐµ Ñ„Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¼, Ð¸Ð·Ð±ÐµÐ³Ð°Ð¹ ÑˆÑƒÑ‚Ð¾Ðº, Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€ÑƒÐ¹ÑÑ Ð½Ð° Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ñ‚ÐµÐ¼Ð°Ñ…...",rows:3,maxLength:4096,className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 resize-none focus:outline-none focus:ring-2 focus:ring-yellow-500/30 text-sm"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[h.length," / 4096"]}),y&&e.jsxs(k,{onClick:x,disabled:c,size:"sm",className:"bg-yellow-500 hover:bg-yellow-600 text-black",children:[c?e.jsx(T,{size:14,className:"mr-1 animate-spin"}):e.jsx(ie,{size:14,className:"mr-1"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"]})]})]}),e.jsx(ht,{chatId:n})]})}function ht({chatId:n}){const{data:r,isLoading:m}=os(n),u=cs(n),h=ds(n),j=xs(n),[c,b]=t.useState(null),[y,N]=t.useState(!1),[x,g]=t.useState({topic:"",stance:"",reasoning:"",strength:7,can_change:!0}),f=()=>{g({topic:"",stance:"",reasoning:"",strength:7,can_change:!0}),b(null),N(!1)},S=async()=>{if(!(!x.topic.trim()||!x.stance.trim()))try{await u.mutateAsync(x),f()}catch(s){console.error("Failed to create opinion:",s)}},w=async()=>{if(!c||c.id<0){await S();return}try{await h.mutateAsync({opinionId:c.id,data:{stance:x.stance,reasoning:x.reasoning,strength:x.strength,can_change:x.can_change}}),f()}catch(s){console.error("Failed to update opinion:",s)}},C=s=>{g({topic:s.topic,stance:s.stance,reasoning:s.reasoning,strength:s.strength,can_change:s.can_change}),b(s),N(!1)},z=async s=>{try{await j.mutateAsync(s)}catch(p){console.error("Failed to delete opinion:",p)}},M=r?.opinions||[],_=M.filter(s=>!s.is_default),a=M.filter(s=>s.is_default),d=y||c!==null;return e.jsxs(q,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(W,{icon:Ae,title:"ÐœÐ½ÐµÐ½Ð¸Ñ",color:"text-purple-400"}),!d&&e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>{f(),N(!0)},className:"gap-1.5 border-purple-500/30 text-purple-400 hover:bg-purple-500/10",children:[e.jsx(ye,{size:14}),"ÐÐ¾Ð²Ð¾Ðµ Ð¼Ð½ÐµÐ½Ð¸Ðµ"]})]}),e.jsx(Ve,{children:d&&e.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-5",children:e.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qe,{size:16,className:"text-purple-400"}),e.jsx("span",{className:"font-medium text-sm",children:c?c.is_default?"ÐŸÐµÑ€ÐµÐ¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ Ð¼Ð½ÐµÐ½Ð¸Ðµ":"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ":"ÐÐ¾Ð²Ð¾Ðµ Ð¼Ð½ÐµÐ½Ð¸Ðµ"})]}),(y||c?.is_default)&&e.jsx("input",{type:"text",placeholder:"Ð¢ÐµÐ¼Ð° (Ð¼ÑƒÐ·Ñ‹ÐºÐ°, ÑÐ¿Ð¾Ñ€Ñ‚, Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸...)",value:x.topic,onChange:s=>g({...x,topic:s.target.value}),className:"w-full h-9 px-3 rounded-lg bg-black/20 border border-white/10 text-sm focus:outline-none focus:border-purple-500/50"}),e.jsx("input",{type:"text",placeholder:"ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ â€” Ñ‡Ñ‚Ð¾ Ð´ÑƒÐ¼Ð°ÐµÑ‚ Cortes",value:x.stance,onChange:s=>g({...x,stance:s.target.value}),className:"w-full h-9 px-3 rounded-lg bg-black/20 border border-white/10 text-sm focus:outline-none focus:border-purple-500/50"}),e.jsx("textarea",{placeholder:"ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ñ‚Ð°Ðº ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ (Ð¾Ð±Ð¾ÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ)",value:x.reasoning,onChange:s=>g({...x,reasoning:s.target.value}),rows:2,className:"w-full px-3 py-2 rounded-lg bg-black/20 border border-white/10 resize-none text-sm focus:outline-none focus:border-purple-500/50"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Ð¡Ð¸Ð»Ð° ÑƒÐ±ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ"}),e.jsx("div",{className:"flex gap-1.5",children:[{value:3,label:"Ð¡Ð»Ð°Ð±Ð¾Ðµ",color:"bg-blue-500/20 text-blue-400 border-blue-500/30 hover:bg-blue-500/30"},{value:5,label:"Ð£Ð¼ÐµÑ€ÐµÐ½Ð½Ð¾Ðµ",color:"bg-purple-500/20 text-purple-400 border-purple-500/30 hover:bg-purple-500/30"},{value:7,label:"Ð¡Ð¸Ð»ÑŒÐ½Ð¾Ðµ",color:"bg-orange-500/20 text-orange-400 border-orange-500/30 hover:bg-orange-500/30"},{value:9,label:"Ð¢Ð²Ñ‘Ñ€Ð´Ð¾Ðµ",color:"bg-red-500/20 text-red-400 border-red-500/30 hover:bg-red-500/30"}].map(s=>e.jsx("button",{type:"button",onClick:()=>g({...x,strength:s.value}),className:`flex-1 py-2 px-2 rounded-lg text-xs font-medium border transition-all ${x.strength===s.value?s.color+" ring-1 ring-white/20":"bg-white/5 text-muted-foreground border-white/10 hover:bg-white/10"}`,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"ÐŸÑ€Ð¸ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¸Ñ… Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ…"}),e.jsxs("div",{className:"flex rounded-lg bg-white/5 p-1",children:[e.jsx("button",{type:"button",onClick:()=>g({...x,can_change:!1}),className:`flex-1 py-1.5 px-3 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-1.5 ${x.can_change?"text-muted-foreground hover:text-white":"bg-red-500/20 text-red-400"}`,children:e.jsx("span",{children:"ÐÐµ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ Ð¼Ð½ÐµÐ½Ð¸Ðµ"})}),e.jsx("button",{type:"button",onClick:()=>g({...x,can_change:!0}),className:`flex-1 py-1.5 px-3 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-1.5 ${x.can_change?"bg-green-500/20 text-green-400":"text-muted-foreground hover:text-white"}`,children:e.jsx("span",{children:"ÐœÐ¾Ð¶ÐµÑ‚ Ð¿ÐµÑ€ÐµÐ´ÑƒÐ¼Ð°Ñ‚ÑŒ"})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-1",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:f,children:"ÐžÑ‚Ð¼ÐµÐ½Ð°"}),e.jsxs(k,{size:"sm",onClick:w,disabled:u.isPending||h.isPending||!x.stance.trim(),className:"bg-purple-500 hover:bg-purple-600",children:[(u.isPending||h.isPending)&&e.jsx(T,{size:14,className:"mr-1 animate-spin"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"]})]})]})})}),m?e.jsx("div",{className:"flex justify-center py-6",children:e.jsx(T,{className:"w-5 h-5 animate-spin text-purple-400"})}):M.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-2xl bg-purple-500/10 flex items-center justify-center",children:e.jsx(Ae,{size:24,className:"text-purple-400/50"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ð£ Cortes Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚ Ð¼Ð½ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ñ‡Ð°Ñ‚Ð°"}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÐµÑ€Ð²Ð¾Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð·Ð°Ð´Ð°Ñ‚ÑŒ Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€"})]}):e.jsxs("div",{className:"space-y-6",children:[_.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-purple-400 mb-2",children:"ÐÐ°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ðµ"}),e.jsx("div",{className:"grid gap-2",children:_.map(s=>e.jsx(gt,{opinion:s,onEdit:()=>C(s),onDelete:()=>z(s.id),isDeleting:j.isPending},s.id))})]}),a.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-muted-foreground mb-2",children:"Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(s=>e.jsx(pt,{opinion:s,onOverride:()=>C(s)},s.topic))})]})]})]})}function gt({opinion:n,onEdit:r,onDelete:m,isDeleting:u}){const h=n.strength>=8?"from-red-500 to-orange-500":n.strength>=5?"from-purple-500 to-pink-500":"from-blue-500 to-cyan-500";return e.jsxs(R.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"group relative p-3 rounded-xl bg-white/5 hover:bg-white/8 border border-white/5 hover:border-purple-500/30 transition-all",children:[e.jsx("div",{className:`absolute left-0 top-3 bottom-3 w-1 rounded-full bg-gradient-to-b ${h}`}),e.jsx("div",{className:"pl-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:n.topic}),!n.can_change&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-500/20 text-red-400",children:"Ñ‚Ð²Ñ‘Ñ€Ð´Ð¾Ðµ"})]}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:n.stance}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:n.reasoning})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(k,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:r,children:e.jsx(Se,{size:12})}),e.jsx(k,{variant:"ghost",size:"icon",className:"h-7 w-7 text-red-400 hover:text-red-300",onClick:m,disabled:u,children:u?e.jsx(T,{size:12,className:"animate-spin"}):e.jsx(we,{size:12})})]})]})})]})}function pt({opinion:n,onOverride:r}){return e.jsxs("button",{onClick:r,className:"group relative px-3 py-1.5 rounded-full bg-white/5 hover:bg-purple-500/20 border border-white/10 hover:border-purple-500/30 transition-all text-sm",children:[e.jsx("span",{className:"text-muted-foreground group-hover:text-white transition-colors",children:n.topic}),e.jsx("span",{className:"ml-1.5 text-[10px] text-muted-foreground/50 group-hover:text-purple-400 transition-colors",children:"+"})]})}function It(){return e.jsxs("div",{className:"grid lg:grid-cols-3 gap-5",children:[e.jsx(q,{className:"lg:col-span-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:e.jsx(Ne,{size:28,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-bold",children:je.name}),e.jsx("span",{className:"px-2 py-0.5 rounded-lg bg-green-400/10 text-green-400 text-xs font-medium",children:"ÐÐºÑ‚Ð¸Ð²ÐµÐ½"})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Ð´Ð¾ ",je.expiresAt," â€¢ Ð¾ÑÑ‚Ð°Ð»Ð¾ÑÑŒ ",je.daysLeft," Ð´Ð½ÐµÐ¹"]})]})]}),e.jsxs(k,{variant:"outline",className:"border-white/10",children:[e.jsx(Bs,{size:16,className:"mr-2"}),"Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹"]})]})}),it.map(n=>{const r=n.id===je.current,m=n.id==="business"||n.id==="pro"&&je.current==="free";return e.jsxs(q,{className:`relative ${r?"ring-2 ring-primary/50":""} ${n.popular?"lg:-mt-2 lg:mb-2":""}`,children:[n.popular&&e.jsx("div",{className:"absolute -top-3 right-4 px-3 py-1 rounded-full bg-gradient-to-r from-primary to-secondary text-white text-xs font-semibold",children:"Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.id==="free"?"bg-white/10 text-muted-foreground":n.id==="pro"?"bg-primary/10 text-primary":"bg-yellow-400/10 text-yellow-400"}`,children:n.id==="free"?e.jsx(Oe,{size:18}):n.id==="pro"?e.jsx(Qe,{size:18}):e.jsx(Ne,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:n.name}),e.jsxs("p",{className:`text-lg font-bold ${n.color}`,children:[n.price==="0"?"Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾":`${n.price}â‚½`,e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:n.period})]})]})]}),e.jsx("div",{className:"space-y-2 mb-5",children:n.features.map((u,h)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ie,{size:14,className:"text-green-400 shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:u})]},h))}),r?e.jsx("div",{className:"text-center py-2 rounded-xl bg-primary/10 text-primary text-sm font-medium",children:"Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ Ñ‚Ð°Ñ€Ð¸Ñ„"}):m?e.jsxs(k,{className:"w-full",children:["Ð£Ð»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ Ð´Ð¾ ",n.name]}):e.jsx(k,{variant:"outline",className:"w-full border-white/10",children:"ÐŸÐ¾Ð½Ð¸Ð·Ð¸Ñ‚ÑŒ"})]},n.id)}),e.jsx(q,{className:"lg:col-span-3",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(k,{variant:"outline",className:"border-white/10",children:[e.jsx(ys,{size:16,className:"mr-2"}),"ÐŸÑ€Ð¸Ð²ÑÐ·Ð°Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñƒ"]}),e.jsxs(k,{variant:"outline",className:"border-white/10",children:[e.jsx(_e,{size:16,className:"mr-2"}),"Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ ÑÑ‡Ñ‘Ñ‚"]}),e.jsx(k,{variant:"ghost",className:"text-red-400 hover:text-red-300 hover:bg-red-400/10 ml-auto",children:"ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ"})]})})]})}export{lt as A,Dt as B,Ms as E,Ge as F,Bs as H,Ut as L,Bt as M,It as P,q as S,Ft as T,W as a,Ot as b,Wt as c,Rt as d,Pt as s};
